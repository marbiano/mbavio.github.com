function addToOnload(a){var b=window.onload;window.onload=function(){b(),a()}}function scrollToTop(){$("body,html").animate({scrollTop:0},1e3)}function bindDropdownMenus(){$("#new-hunts").click(function(a){Navigation.toggleNewHuntsMenu(),Navigation.onMenuToggle($("#new-hunts .menu-toggle")),a.stopPropagation()}),$(document).on("click","html",function(a){var b=$("#new-hunts .menu");FilterBar.isMenuOpen(b)&&FilterBar.closeMenu(b)}),$("#new-hunts").hover(function(a){Navigation.onMenuHoverIn($(a.target))},function(a){Navigation.onMenuHoverOut($(a.target))})}function bindSigninHover(){Navigation.highlightNav(),$("#navigation .last").hover(Navigation.showUserMenu,Navigation.hideUserMenu)}function bodyContainsZines(){return $(".collection-item .zine-id").length!=0}function bodyContainsNotes(){return $(".collection-item .note-id").length!=0}function is_signed_in(){return current_user_descriptor()!="anonymous"}function current_user_descriptor(){return $("#user-descriptor").attr("data")}function current_user_outbound_id(){return $("#user-outbound-id").attr("data")}function event_action_prefix(){return $("#user-prefix").attr("data")}function loadInstagramPhotos(a){$("#actions").hide(),$("#finds").hide(),$("#image-preview").hide(),addInstagramPhotos(null,a),$("#instagram-photos").show("blind",{direction:"vertical"},2e3)}function addInstagramPhotos(a,b){$("#loader").hide(),$("#paginator").remove(),$("#instagram-photos").append(b),$("#instagram_paginator").on("ajax:success",addInstagramPhotos),$(".instagram-image img").click(ZineView.previewImageClicked)}function onSearchCompleted(){setupPopularViewPagination(),$("#new-hunts.disabled").length==0&&bindDropdownMenus()}function setupPopularViewPagination(){filterBarElement=$("#controls.homepage"),$("#more").html(""),onZinesLoaded()}function onZinesLoaded(){$("#finds").get(0)&&$("#finds").attr("id","hunts"),$(".collection-container.note").length>0&&notesController.requestNoteMetadata(),bodyContainsZines()&&zinesController.requestZineMetadata(),followingFeed.applyHiddenFields(),attachCollectionMouseovers(),FollowInterstitial.isLoaded()&&FollowInterstitial.onPageLoaded()}function attachCollectionMouseovers(){$(".help-icon").mouseover(function(){$(this).parents(".collection-container").find(".help-text-container").show()}).mouseout(function(){$(this).parents(".collection-container").find(".help-text-container").fadeOut(300)})}function onNotesLoaded(){attachNotesPaginator(),$("#hunts").get(0)&&$("#hunts").attr("id","finds"),setNewCommentAvatars(),attachFeedbackForm(),affiliateLinks()}function attachNotesPaginator(){$("#request-more-finds").on("ajax:beforeSend",ZineView.pageNotes).on("ajax:success",ZineView.showNotes)}function affiliateLinks(){$.each($("a"),function(a,b){typeof vglnk!="undefined"&&typeof vglnk.link=="function"&&(val=$(b),val&&vglnk.link(val))})}function attachFeedbackForm(){$(".feedback form").on("ajax:beforeSend",ZineView.postFeedback).on("ajax:success",ZineView.feedbackPosted)}function setNewCommentAvatars(){$(".new_comment").find(".splash-board").find(".label").html($("#user-avatar").html())}function disableInput(a){$(a).addClass("disabled"),setTimeout(function(){$(a).attr("disabled","disabled")},13)}function enableInput(a){$(a).removeAttr("disabled"),$(a).removeClass("disabled")}function loadElement(a){$(a).addClass("loading"),$(a).append("<img src='/assets/loader.gif' class='floater' />")}function elementLoaded(a){$(a).removeClass("loading"),$(".floater").remove()}function showError(a,b,c,d,e){var f=e===undefined?$(this):$(e),g,h;try{g=$.parseJSON(b.responseText)}catch(i){g={message:"An error occurred submitting your request."}}h="<ul>";for(d in g)h+="<li>"+g[d]+"</li> ";h+="</ul>",f.find(".form-error").html(h)}function _ajax_request(a,b,c,d,e){return jQuery.isFunction(b)&&(c=b,b={}),jQuery.ajax({type:e,url:a,data:b,success:c,dataType:d})}function showSignonModal(a){$("#dim").show(),$("#hardgate-container").show(),$("#signin_user_email").focus(),a&&$("#dim").bind("click",exploreTheHunt)}function exploreTheHunt(){$("#hardgate-container").hide(),$("#dim").hide(),$.cookie("modal","modal",{expires:new Date(jQuery.now()+288e5),path:"/"}),$("#dim").unbind("click")}function initSelect2(a){$(a).select2({width:"element",tags:!0,tokenSeparators:[","," "],minimumInputLength:1,formatInputTooShort:function(){return""},formatSearching:function(){return""},formatNoMatches:function(){return""},formatLoadMore:function(){return""},formatResult:function(a,b,c){return"#"+a.text},formatSelection:function(a){return a.text.match(/^#/)?a.text:"#"+a.text},createSearchChoice:function(b,c){if($(c).filter(function(){return this.text.localeCompare(b)===0}).length===0)return $(document).one("select2-highlight",a,function(){$(".select2-result-label:first").hide()}),{id:b,text:b}},cache:!0,quietMillis:0,ajax:{url:"/tags.json",data:function(a,b){return{pageNum:b,searchTerm:a}},results:function(a,b){return{results:a,more:a.length===30}}},loadMorePadding:330})}(function(a,b){var c;a.rails=c={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote], a[data-disable-with]",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not(button[type])",disableSelector:"input[data-disable-with], button[data-disable-with], textarea[data-disable-with]",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled",requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input:file",linkDisableSelector:"a[data-disable-with]",CSRFProtection:function(b){var c=a('meta[name="csrf-token"]').attr("content");c&&b.setRequestHeader("X-CSRF-Token",c)},fire:function(b,c,d){var e=a.Event(c);return b.trigger(e,d),e.result!==!1},confirm:function(a){return confirm(a)},ajax:function(b){return a.ajax(b)},handleRemote:function(d){var e,f,g,h=d.data("cross-domain")||null,i=d.data("type")||a.ajaxSettings&&a.ajaxSettings.dataType,j;if(c.fire(d,"ajax:before")){if(d.is("form")){e=d.attr("method"),f=d.attr("action"),g=d.serializeArray();var k=d.data("ujs:submit-button");k&&(g.push(k),d.data("ujs:submit-button",null))}else d.is(c.inputChangeSelector)?(e=d.data("method"),f=d.data("url"),g=d.serialize(),d.data("params")&&(g=g+"&"+d.data("params"))):(e=d.data("method"),f=d.attr("href"),g=d.data("params")||null);return j={type:e||"GET",data:g,dataType:i,crossDomain:h,beforeSend:function(a,e){return e.dataType===b&&a.setRequestHeader("accept","*/*;q=0.5, "+e.accepts.script),c.fire(d,"ajax:beforeSend",[a,e])},success:function(a,b,c){d.trigger("ajax:success",[a,b,c])},complete:function(a,b){d.trigger("ajax:complete",[a,b])},error:function(a,b,c){d.trigger("ajax:error",[a,b,c])}},f&&(j.url=f),c.ajax(j)}return!1},handleMethod:function(c){var d=c.attr("href"),e=c.data("method"),f=c.attr("target"),g=a("meta[name=csrf-token]").attr("content"),h=a("meta[name=csrf-param]").attr("content"),i=a('<form method="post" action="'+d+'"></form>'),j='<input name="_method" value="'+e+'" type="hidden" />';h!==b&&g!==b&&(j+='<input name="'+h+'" value="'+g+'" type="hidden" />'),f&&i.attr("target",f),i.hide().append(j).appendTo("body"),i.submit()},disableFormElements:function(b){b.find(c.disableSelector).each(function(){var b=a(this),c=b.is("button")?"html":"val";b.data("ujs:enable-with",b[c]()),b[c](b.data("disable-with")),b.prop("disabled",!0)})},enableFormElements:function(b){b.find(c.enableSelector).each(function(){var b=a(this),c=b.is("button")?"html":"val";b.data("ujs:enable-with")&&b[c](b.data("ujs:enable-with")),b.prop("disabled",!1)})},allowAction:function(a){var b=a.data("confirm"),d=!1,e;return b?(c.fire(a,"confirm")&&(d=c.confirm(b),e=c.fire(a,"confirm:complete",[d])),d&&e):!0},blankInputs:function(b,c,d){var e=a(),f,g=c||"input,textarea";return b.find(g).each(function(){f=a(this);if(d?f.val():!f.val())e=e.add(f)}),e.length?e:!1},nonBlankInputs:function(a,b){return c.blankInputs(a,b,!0)},stopEverything:function(b){return a(b.target).trigger("ujs:everythingStopped"),b.stopImmediatePropagation(),!1},callFormSubmitBindings:function(c,d){var e=c.data("events"),f=!0;return e!==b&&e.submit!==b&&a.each(e.submit,function(a,b){if(typeof b.handler=="function")return f=b.handler(d)}),f},disableElement:function(a){a.data("ujs:enable-with",a.html()),a.html(a.data("disable-with")),a.bind("click.railsDisable",function(a){return c.stopEverything(a)})},enableElement:function(a){a.data("ujs:enable-with")!==b&&(a.html(a.data("ujs:enable-with")),a.data("ujs:enable-with",!1)),a.unbind("click.railsDisable")}},a.ajaxPrefilter(function(a,b,d){a.crossDomain||c.CSRFProtection(d)}),a(document).delegate(c.linkDisableSelector,"ajax:complete",function(){c.enableElement(a(this))}),a(document).delegate(c.linkClickSelector,"click.rails",function(d){var e=a(this),f=e.data("method"),g=e.data("params");if(!c.allowAction(e))return c.stopEverything(d);e.is(c.linkDisableSelector)&&c.disableElement(e);if(e.data("remote")!==b)return(d.metaKey||d.ctrlKey)&&(!f||f==="GET")&&!g?!0:(c.handleRemote(e)===!1&&c.enableElement(e),!1);if(e.data("method"))return c.handleMethod(e),!1}),a(document).delegate(c.inputChangeSelector,"change.rails",function(b){var d=a(this);return c.allowAction(d)?(c.handleRemote(d),!1):c.stopEverything(b)}),a(document).delegate(c.formSubmitSelector,"submit.rails",function(d){var e=a(this),f=e.data("remote")!==b,g=c.blankInputs(e,c.requiredInputSelector),h=c.nonBlankInputs(e,c.fileInputSelector);if(!c.allowAction(e))return c.stopEverything(d);if(g&&e.attr("novalidate")==b&&c.fire(e,"ajax:aborted:required",[g]))return c.stopEverything(d);if(f)return h?c.fire(e,"ajax:aborted:file",[h]):!a.support.submitBubbles&&a().jquery<"1.7"&&c.callFormSubmitBindings(e,d)===!1?c.stopEverything(d):(c.handleRemote(e),!1);setTimeout(function(){c.disableFormElements(e)},13)}),a(document).delegate(c.formInputClickSelector,"click.rails",function(b){var d=a(this);if(!c.allowAction(d))return c.stopEverything(b);var e=d.attr("name"),f=e?{name:e,value:d.val()}:null;d.closest("form").data("ujs:submit-button",f)}),a(document).delegate(c.formSubmitSelector,"ajax:beforeSend.rails",function(b){this==b.target&&c.disableFormElements(a(this))}),a(document).delegate(c.formSubmitSelector,"ajax:complete.rails",function(b){this==b.target&&c.enableFormElements(a(this))})})(jQuery),function(a){a.fn.endlessScroll=function(b){var c={bottomPixels:50,fireOnce:!0,fireDelay:150,loader:"<br />Loading...<br />",data:"",insertAfter:"div:last",resetCounter:function(){return!1},callback:function(){return!0},ceaseFire:function(){return!1},intervalFrequency:250},b=a.extend({},c,b),d=!0,e=!1,f=0,g=!1,h=this,i="",j=a(".endless_scroll_inner_wrap",this),k;a(this).scroll(function(){g=!0,h=this,i=a(h).attr("id")}),setInterval(function(){if(g&&d===!0){g=!1;if(b.ceaseFire.apply(h,[f])===!0){d=!1;return}h==document||h==window?k=a(document).height()-a(window).height()<=a(window).scrollTop()+b.bottomPixels:(j.length==0&&(j=a(h).wrapInner('<div class="endless_scroll_inner_wrap" />').find(".endless_scroll_inner_wrap")),k=j.length>0&&j.height()-a(h).height()<=a(h).scrollTop()+b.bottomPixels),k&&(b.fireOnce==0||b.fireOnce==1&&e!=1)&&(b.resetCounter.apply(h)===!0&&(f=0),e=!0,f++,a(b.insertAfter).after('<div class="endless_scroll_loader_'+i+' endless_scroll_loader">'+b.loader+"</div>"),data=typeof b.data=="function"?b.data.apply(h,[f]):b.data,data!==!1&&(a(b.insertAfter).after('<div id="endless_scroll_data">'+data+"</div>"),a("#endless_scroll_data").hide().fadeIn(250,function(){a(this).removeAttr("id")}),b.callback.apply(h,[f]),b.fireDelay!==!1||b.fireDelay!==0?(a("body").after('<div id="endless_scroll_marker"></div>'),a("#endless_scroll_marker").fadeTo(b.fireDelay,1,function(){a(this).remove(),e=!1})):e=!1),a(".endless_scroll_loader_"+i).fadeOut(function(){a(this).remove()}))}},b.intervalFrequency)}}(jQuery),function(a){a.fn.bindFirst=function(b,c,d){var e=b.split(" ");for(var f=0;f<e.length;f++){var g=e[f],h=g.indexOf("."),i=h>0?g.substring(h):"";g=h>0?g.substring(0,h):g,d=d==undefined?c:d,c=typeof c=="function"?{}:c,this.each(function(){var b=a(this),e=this["on"+g];e&&(b.bind(g,function(a){return e(a.originalEvent)}),this["on"+g]=null),b.bind(g+i,c,d);var f=b.data("events"),h=f[g],j=h.pop();h.unshift(j)})}}}(jQuery),function(a){function b(b,c,d){d=f(c,d);var e=b.currentTarget;if(e.tagName.toUpperCase()!=="A")throw"$.fn.pjax or $.pjax.click requires an anchor element";if(b.which>1||b.metaKey)return;if(location.protocol!==e.protocol||location.host!==e.host)return;if(e.hash&&e.href.replace(e.hash,"")===location.href.replace(location.hash,""))return;var g={url:e.href,container:a(e).attr("data-pjax"),target:e,clickedElement:a(e),fragment:null};return a.pjax(a.extend({},g,d)),b.preventDefault(),!1}function c(a){return a.replace(/\?_pjax=[^&]+&?/,"?").replace(/_pjax=[^&]+&?/,"").replace(/[\?&]$/,"")}function d(a){var b=document.createElement("a");return b.href=a,b}function f(b,c){return b&&c?c.container=b:a.isPlainObject(b)?c=b:c={container:b},c.container&&(c.container=g(c.container)),c}function g(b){b=a(b);if(!b.length)throw"no pjax container for "+b.selector;if(b.selector!==""&&b.context===document)return b;if(b.attr("id"))return a("#"+b.attr("id"));throw"cant get selector for pjax container!"}a.fn.pjax=function(a,c){return this.live("click.pjax",function(d){return b(d,a,c)})};var e=a.pjax=function(b){function o(b,c){var d=a.Event(b,{relatedTarget:f});return n.trigger(d,c),!d.isDefaultPrevented()}b=a.extend(!0,{},a.ajaxSettings,e.defaults,b),a.isFunction(b.url)&&(b.url=b.url());var f=b.target;!f&&b.clickedElement&&(f=b.clickedElement[0]);var h=b.url,i=d(h).hash,j=b.beforeSend,k=b.complete,l=b.success,m=b.error,n=b.context=g(b.container);b.data||(b.data={}),b.data._pjax=n.selector;var p;b.beforeSend=function(a,d){h=c(d.url),d.timeout>0&&(p=setTimeout(function(){o("pjax:timeout",[a,b])&&a.abort("timeout")},d.timeout),d.timeout=0),a.setRequestHeader("X-PJAX","true"),a.setRequestHeader("X-PJAX-Container",n.selector);var e;if(j){e=j.apply(this,arguments);if(e===!1)return!1}if(!o("pjax:beforeSend",[a,d]))return!1;o("pjax:start",[a,b]),o("start.pjax",[a,b])},b.complete=function(a,c){p&&clearTimeout(p),k&&k.apply(this,arguments),o("pjax:complete",[a,c,b]),o("pjax:end",[a,b]),o("end.pjax",[a,b])},b.error=function(a,d,e){var f=a.getResponseHeader("X-PJAX-URL");f&&(h=c(f)),m&&m.apply(this,arguments);var g=o("pjax:error",[a,d,e,b]);d!=="abort"&&g&&(window.location=h)},b.success=function(d,f,g){var j=g.getResponseHeader("X-PJAX-URL");j&&(h=c(j));var k,m=document.title;if(b.fragment){var n=a("<html>").html(d),p=n.find(b.fragment);if(!p.length)return window.location=h;this.html(p.contents()),k=n.find("title").text()||p.attr("title")||p.data("title")}else{if(!a.trim(d)||/<html/i.test(d))return window.location=h;this.html(d),k=this.find("title").remove().text()}k&&(document.title=a.trim(k));var q={url:h,pjax:this.selector,fragment:b.fragment,timeout:b.timeout};b.replace?(e.active=!0,window.history.replaceState(q,document.title,h)):b.push&&(e.active||(window.history.replaceState(a.extend({},q,{url:null}),m),e.active=!0),window.history.pushState(q,document.title,h)),(b.replace||b.push)&&window._gaq&&_gaq.push(["_trackPageview"]),i!==""&&(window.location.href=i),l&&l.apply(this,arguments),o("pjax:success",[d,f,g,b])};var q=e.xhr;return q&&q.readyState<4&&(q.onreadystatechange=a.noop,q.abort()),e.options=b,e.xhr=a.ajax(b),a(document).trigger("pjax",[e.xhr,b]),e.xhr};e.defaults={timeout:650,push:!0,replace:!1,type:"GET",dataType:"html"},e.click=b;var h="state"in window.history,i=location.href;a(window).bind("popstate",function(b){var c=!h&&location.href==i;h=!0;if(c)return;var d=b.state;if(d&&d.pjax){var e=d.pjax;a(e+"").length?a.pjax({url:d.url||location.href,fragment:d.fragment,container:e,push:!1,timeout:d.timeout}):window.location=location.href}}),a.inArray("state",a.event.props)<0&&a.event.props.push("state"),a.support.pjax=window.history&&window.history.pushState&&window.history.replaceState&&!navigator.userAgent.match(/((iPod|iPhone|iPad).+\bOS\s+[1-4]|WebApps\/.+CFNetwork)/),a.support.pjax||(a.pjax=function(b){var c=a.isFunction(b.url)?b.url():b.url,d=b.type?b.type.toUpperCase():"GET",e=a("<form>",{method:d==="GET"?"GET":"POST",action:c,style:"display:none"});d!=="GET"&&d!=="POST"&&e.append(a("<input>",{type:"hidden",name:"_method",value:d.toLowerCase()}));var f=b.data;if(typeof f=="string")a.each(f.split("&"),function(b,c){var d=c.split("=");e.append(a("<input>",{type:"hidden",name:d[0],value:d[1]}))});else if(typeof f=="object")for(key in f)e.append(a("<input>",{type:"hidden",name:key,value:f[key]}));a(document.body).append(e),e.submit()},a.pjax.click=a.noop,a.fn.pjax=function(){return this})}(jQuery),function(a,b,c){function e(a){return a}function f(a){return decodeURIComponent(a.replace(d," "))}var d=/\+/g,g=a.cookie=function(d,h,i){if(h!==c){i=a.extend({},g.defaults,i),h===null&&(i.expires=-1);if(typeof i.expires=="number"){var j=i.expires,k=i.expires=new Date;k.setDate(k.getDate()+j)}return h=g.json?JSON.stringify(h):String(h),b.cookie=[encodeURIComponent(d),"=",g.raw?h:encodeURIComponent(h),i.expires?"; expires="+i.expires.toUTCString():"",i.path?"; path="+i.path:"",i.domain?"; domain="+i.domain:"",i.secure?"; secure":""].join("")}var l=g.raw?e:f,m=b.cookie.split("; ");for(var n=0,o=m.length;n<o;n++){var p=m[n].split("=");if(l(p.shift())===d){var q=l(p.join("="));return g.json?JSON.parse(q):q}}return null};g.defaults={},a.removeCookie=function(b,c){return a.cookie(b)!==null?(a.cookie(b,null,c),!0):!1}}(jQuery,document),!function(a){var b=function(a){this.messages={defaultMessage:"This value seems to be invalid.",type:{email:"This value should be a valid email.",url:"This value should be a valid url.",urlstrict:"This value should be a valid url.",number:"This value should be a valid number.",digits:"This value should be digits.",dateIso:"This value should be a valid date (YYYY-MM-DD).",alphanum:"This value should be alphanumeric."},notnull:"This value should not be null.",notblank:"This value should not be blank.",required:"This value is required.",regexp:"This value seems to be invalid.",min:"This value should be greater than %s.",max:"This value should be lower than %s.",range:"This value should be between %s and %s.",minlength:"This value is too short. It should have %s characters or more.",maxlength:"This value is too long. It should have %s characters or less.",rangelength:"This value length is invalid. It should be between %s and %s characters long.",mincheck:"You must select at least %s choices.",maxcheck:"You must select %s choices or less.",rangecheck:"You must select between %s and %s choices.",equalto:"This value should be the same."},this.init(a)};b.prototype={constructor:b,validators:{notnull:function(a){return 0<a.length},notblank:function(a){return null!==a&&""!==a.replace(/^\s+/g,"").replace(/\s+$/g,"")},required:function(a){if("object"==typeof a){for(var b in a)if(this.required(a[b]))return!0;return!1}return this.notnull(a)&&this.notblank(a)},type:function(a,b){var c;switch(b){case"number":c=/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/;break;case"digits":c=/^\d+$/;break;case"alphanum":c=/^\w+$/;break;case"email":c=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i;break;case"url":a=/(https?|s?ftp|git)/i.test(a)?a:"http://"+a;case"urlstrict":c=/^(https?|s?ftp|git):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i;break;case"dateIso":c=/^(\d{4})\D?(0[1-9]|1[0-2])\D?([12]\d|0[1-9]|3[01])$/;break;default:return!1}return""!==a?c.test(a):!1},regexp:function(a,b){return RegExp(b,"i").test(a)},minlength:function(a,b){return a.length>=b},maxlength:function(a,b){return a.length<=b},rangelength:function(a,b){return this.minlength(a,b[0])&&this.maxlength(a,b[1])},min:function(a,b){return Number(a)>=b},max:function(a,b){return Number(a)<=b},range:function(a,b){return a>=b[0]&&a<=b[1]},equalto:function(b,c){return b===a(c).val()},remote:function(b,c,d){var e={},f={};e[d.$element.attr("name")]=b,"undefined"!=typeof d.options.remoteDatatype&&(f={dataType:d.options.remoteDatatype});var g=function(a){d.updtConstraint({name:"remote",isValid:a}),d.manageValidationResult()};return a.ajax(a.extend({},{url:c,data:e,async:d.async,method:d.options.remoteMethod||"GET",success:function(a){g("1"===a||"true"==a||"object"==typeof a&&"undefined"!=typeof a.success||/success/i.test(a))},error:function(){g(!1)}},f)),d.async&&g(null),null},mincheck:function(a,b){return this.minlength(a,b)},maxcheck:function(a,b){return this.maxlength(a,b)},rangecheck:function(a,b){return this.rangelength(a,b)}},init:function(a){var b=a.validators;a=a.messages;for(var c in b)this.addValidator(c,b[c]);for(c in a)this.addMessage(c,a[c])},formatMesssage:function(a,b){if("object"==typeof b){for(var c in b)a=this.formatMesssage(a,b[c]);return a}return a.replace(/%s/i,b)},addValidator:function(a,b){this.validators[a]=b},addMessage:function(a,b,c){if("undefined"!=typeof c&&!0===c)this.messages.type[a]=b;else if("type"===a)for(var d in b)this.messages.type[d]=b[d];else this.messages[a]=b}};var c=function(a,c,d){this.options=c,this.Validator=new b(c),this.init(a,d||"ParsleyField")};c.prototype={constructor:c,init:function(b,c){this.type=c,this.isValid=!0,this.element=b,this.validatedOnce=!1,this.$element=a(b),this.val=this.$element.val(),this.isRequired=!1,this.constraints=[],"undefined"==typeof this.isRadioOrCheckbox&&(this.isRadioOrCheckbox=!1,this.hash=this.generateHash(),this.errorClassHandler=this.options.errors.classHandler(b)||this.$element),this.ulErrorManagement(),this.bindHtml5Constraints(),this.addConstraints(),this.constraints.length&&this.bindValidationEvents()},bindHtml5Constraints:function(){if(this.$element.hasClass("required")||this.$element.attr("required"))this.options.required=!0;"undefined"!=typeof this.$element.attr("type")&&RegExp(this.$element.attr("type"),"i").test("email url number range")&&(this.options.type=this.$element.attr("type"),RegExp(this.options.type,"i").test("number range")&&(this.options.type="number","undefined"!=typeof this.$element.attr("min")&&this.$element.attr("min").length&&(this.options.min=this.$element.attr("min")),"undefined"!=typeof this.$element.attr("max")&&this.$element.attr("max").length&&(this.options.max=this.$element.attr("max"))))},addConstraints:function(){for(var a in this.options)a=a.toLowerCase(),"function"==typeof this.Validator.validators[a]&&(this.constraints.push({name:a,requirements:this.options[a],isValid:null}),"required"===a&&(this.isRequired=!0),this.addCustomConstraintMessage(a))},addConstraint:function(a){for(var b in a)this.constraints.push({name:b.toLowerCase(),requirements:a[b],isValid:null}),"required"===b&&(this.isRequired=!0);this.isValid=null},updateConstraint:function(a){for(var b in a)this.updtConstraint({name:b,requirements:a[b],isValid:null})},updtConstraint:function(b){for(var c in this.constraints)this.constraints[c].name===b.name&&(this.constraints[c]=a.extend(!0,this.constraints[c],b));this.isValid=null},removeConstraint:function(a){a=a.toLowerCase();var b=[],c;for(c in this.constraints)this.constraints[c].name!==a&&b.push(this.constraints[c]);"required"===a&&(this.isRequired=!1),this.isValid=null,this.constraints=b},addCustomConstraintMessage:function(a){var b=a+("type"===a?this.options[a].charAt(0).toUpperCase()+this.options[a].substr(1):"")+"Message";"undefined"!=typeof this.options[b]&&this.Validator.addMessage("type"===a?this.options[a]:a,this.options[b],"type"===a)},bindValidationEvents:function(){this.$element.addClass("parsley-validated");var b=this.options.trigger+(/key/i.test(this.options.trigger)?"":" keyup");this.options.remote&&(b+=/change/i.test(b)?"":" change"),b&&this.$element.on((b+" ").split(" ").join("."+this.type+" "),!1,a.proxy(this.eventValidation,this))},generateHash:function(){return"parsley-"+(Math.random()+"").substring(2)},getHash:function(){return this.hash},getVal:function(){return this.$element.val()},eventValidation:function(a){var b=this.getVal();if("keyup"===a.type&&!/keyup/i.test(this.options.trigger)&&!this.validatedOnce||b.length<this.options.validationMinlength&&!this.validatedOnce)return!0;this.validate(!0,!1)},isFieldValid:function(){return this.validate(!1,!1)},validate:function(a,b){var c=this.getVal(),d=null;return this.options.listeners.onFieldValidate(this.element,this)||""===c&&!this.isRequired?(this.reset(),null):this.needsValidation(c)?(this.errorBubbling="undefined"!=typeof a?a:!0,this.async="undefined"!=typeof b?b:!0,d=this.applyValidators(),this.errorBubbling&&this.manageValidationResult(),d):this.isValid},needsValidation:function(a){return null!==this.isValid&&this.val===a&&this.validatedOnce?!1:(this.val=a,this.validatedOnce=!0)},applyValidators:function(){for(var a=null,b=0;b<this.constraints.length;b++){var c=this.Validator.validators[this.constraints[b].name](this.val,this.constraints[b].requirements,this);!1===c?(a=!1,this.constraints[b].isValid=a):!0===c&&(this.constraints[b].isValid=!0,a=!1!==a)}return a},manageValidationResult:function(){for(var a=null,b=0;b<this.constraints.length;b++)!1===this.constraints[b].isValid?(this.addError(this.constraints[b]),a=!1):!0===this.constraints[b].isValid&&(this.removeError(this.constraints[b].name),a=!1!==a);return this.isValid=a,!0===this.isValid?(this.removeErrors(),this.errorClassHandler.removeClass(this.options.errorClass).addClass(this.options.successClass),this.options.listeners.onFieldSuccess(this.element,this.constraints,this),!0):!1===this.isValid?(this.errorClassHandler.removeClass(this.options.successClass).addClass(this.options.errorClass),this.options.listeners.onFieldError(this.element,this.constraints,this),!1):a},ulErrorManagement:function(){this.ulError="#"+this.hash,this.ulTemplate=a(this.options.errors.errorsWrapper).attr("id",this.hash).addClass("parsley-error-list")},removeError:function(b){b=this.ulError+" ."+b,this.ulError&&a(b).remove()&&0===a(this.ulError).children().length&&a(this.ulError).remove()},removeErrors:function(){a(this.ulError).remove()},reset:function(){return this.isValid=null,this.removeErrors(),this.errorClassHandler.removeClass(this.options.successClass).removeClass(this.options.errorClass),this},addError:function(b){a(this.ulError).length||this.options.errors.container(this.element,this.ulTemplate,this.isRadioOrCheckbox)||(this.isRadioOrCheckbox?this.$element.parent().after(this.ulTemplate):this.$element.after(this.ulTemplate));var c=b.name,d=!1!==this.options.errorMessage?"custom-error-message":c,e=this.ulError+" ."+d,d=a(this.options.errors.errorElem).addClass(d);b=!1!==this.options.errorMessage?this.options.errorMessage:"type"===b.name?this.Validator.messages[c][b.requirements]:"undefined"==typeof this.Validator.messages[c]?this.Validator.messages.defaultMessage:this.Validator.formatMesssage(this.Validator.messages[c],b.requirements),a(e).length||a(this.ulError).append(a(d).text(b))},addListener:function(a){for(var b in a)this.options.listeners[b]=a[b]},destroy:function(){this.$element.removeClass("parsley-validated"),this.reset().$element.off("."+this.type).removeData(this.type)}};var d=function(a,c,d){this.initMultiple(a,c),this.inherit(a,c),this.Validator=new b(c),this.init(a,d||"ParsleyFieldMultiple")};d.prototype={constructor:d,initMultiple:function(b,c){this.element=b,this.$element=a(b),this.hash=this.getName(),this.isRadioOrCheckbox=!0,this.isRadio=this.$element.is("input[type=radio]"),this.isCheckbox=this.$element.is("input[type=checkbox]"),this.siblings='input[name="'+this.$element.attr("name")+'"]',this.$siblings=a(this.siblings),this.errorClassHandler=c.errors.classHandler(b)||this.$element.parent()},inherit:function(a,b){var d=new c(a,b),e;for(e in d)"undefined"==typeof this[e]&&(this[e]=d[e])},getName:function(){return"parsley-"+this.$element.attr("name").replace(/(:|\.|\[|\])/g,"")},getVal:function(){if(this.isRadio)return a(this.siblings+":checked").val()||"";if(this.isCheckbox){var b=[];return a(this.siblings+":checked").each(function(){b.push(a(this).val())}),b}}};var e=function(a,b,c){this.init(a,b,c||"parsleyForm")};e.prototype={constructor:e,init:function(b,c,d){this.type=d,this.items=[],this.$element=a(b),this.options=c;var e=this;this.$element.find(c.inputs).each(function(){e.addItem(this)}),this.$element.on("submit."+this.type,!1,a.proxy(this.validate,this))},addListener:function(a){for(var b in a)if(/Field/.test(b))for(var c=0;c<this.items.length;c++)this.items[c].addListener(a);else this.options.listeners[b]=a[b]},addItem:function(b){if(a(b).is(this.options.excluded))return!1;b=a(b).parsley(this.options),null!==b&&this.items.push(b)},removeItem:function(b){for(var c in this.items)if(this.items[c].$element.attr("id")===a(b).attr("id"))return delete this.items[c],!0;return!1},validate:function(a){var b=!0;this.focusedField=!1;for(var c=0;c<this.items.length;c++)"undefined"!=typeof this.items[c]&&!1===this.items[c].validate()&&(b=!1,!this.focusedField&&"first"===this.options.focus||"last"===this.options.focus)&&(this.focusedField=this.items[c].$element);return this.focusedField&&!b&&this.focusedField.focus(),this.options.listeners.onFormSubmit(b,a,this),b},removeErrors:function(){for(var a=0;a<this.items.length;a++)this.items[a].parsley("reset")},destroy:function(){for(var a=0;a<this.items.length;a++)this.items[a].destroy();this.$element.off("."+this.type).removeData(this.type)}},a.fn.parsley=function(b,f){function g(g,i){var l=a(g).data(i);if(!l){switch(i){case"parsleyForm":l=new e(g,h,"parsleyForm");break;case"parsleyField":l=new c(g,h,"parsleyField");break;case"parsleyFieldMultiple":l=new d(g,h,"parsleyFieldMultiple");break;default:return}a(g).data(i,l)}return"string"==typeof b&&"function"==typeof l[b]?(l=l[b](f),"undefined"!=typeof l?l:a(g)):l}var h=a.extend(!0,{},a.fn.parsley.defaults,"undefined"!=typeof window.ParsleyConfig?window.ParsleyConfig:{},b,this.data()),i=null;return a(this).is("form")?i=g(a(this),"parsleyForm"):a(this).is(h.inputs)&&!a(this).is(h.excluded)&&(i=g(a(this),a(this).is("input[type=radio], input[type=checkbox]")?"parsleyFieldMultiple":"parsleyField")),"function"==typeof f?f():i},a.fn.parsley.Constructor=e,a.fn.parsley.defaults={inputs:"input, textarea, select",excluded:"input[type=hidden], :disabled",trigger:!1,focus:"first",validationMinlength:3,successClass:"parsley-success",errorClass:"parsley-error",errorMessage:!1,validators:{},messages:{},errors:{classHandler:function(){},container:function(){},errorsWrapper:"<ul></ul>",errorElem:"<li></li>"},listeners:{onFieldValidate:function(){return!1},onFormSubmit:function(){},onFieldError:function(){},onFieldSuccess:function(){}}},a(window).on("load",function()
{a('[data-validate="parsley"]').each(function(){a(this).parsley()})})}(window.jQuery||window.Zepto),function(){var a,b,c,d;a="",b=function(a){if(a!==void 0)return'"'+a.replace(new RegExp('^"(.*)"$'),"$1")+'"'},jQuery(document).on("ready",function(){return $("#page-state a, #profile-and-settings a").pjax("[data-pjax-container]",{timeout:2e3,headers:{"Skip-Mixpanel-Middleware":!0}}),$("#"+$(".page-state-item.chosen").find("a").data("user-title")).show(),$("#page-state a, #profile-and-settings a").bind("click",function(){return $("#page-state .page-state-item").removeClass("chosen"),$("#page-state").find(".carat_on").hide(),$("#page-state").find(".carat_off").show(),$(this).parent().find(".carat_off").hide(),$(this).parent().find(".carat_on").show(),$(this).parent().parent().addClass("chosen"),$("#user-content-title").children().hide(),$("#finds").html(""),$("#"+$(this).data("user-title")).show()}),a=b($(".editable-userinfo").val())}),d=function(a,b){if(a.attr("readonly")===void 0)return a.attr("readonly","readonly").removeClass("editing-text")},c=function(c,d){if(c.attr("readonly")!==void 0)return a=b(c.val()),c.removeAttr("readonly").addClass("editing-text").select().focus(),d.stopImmediatePropagation()},$(document).on("click",".editable-userinfo",function(a){return c($(this),a)}),$(document).on("click",".editable-userinfo",function(b){var c;return c=$(".editable-userinfo"),c.length>0&&this.id!=="user_tagline"&&(d(c,b),c.val(a)),b.stopPropagation()}),$(document).on("keyup",".editable-userinfo",function(c){var e,f;e=$(this),f=c.keyCode?c.keyCode:c.which;if(f===13)return a=b(e.val()),e.val(a),d(e,c)}),$(document).on("mousedown",".earned-gems-link",function(a){return $(this).addClass("clicked")}),$(document).on("mouseup mouseleave",".earned-gems-link",function(a){return $(this).removeClass("clicked")})}.call(this),function(){followingFeed={},followingFeed.isViewingFeed=function(){return $(".previews.following-feed").length>0},followingFeed.showResults=function(a,b,c){if(c.status==200){clearInterval(followingFeed.pollingId);var d=new Array;$("#zines_page_1 .note-id").each(function(a,b){d.push($(b).attr("data-slug"))}),$("#zines_page_1 .zine-id").each(function(a,b){d.push($(b).attr("data-slug"))});var e=$("#load-inline").attr("data")=="true";$.ajax({url:"/popular_collections/next_following_page?page=1&slugs[]="+d.join("&slugs[]=")+"&load_inline="+e,dataType:"html",success:followingFeed.prependNewFeedItems})}},followingFeed.pollFollowingFeed=function(){$.ajax({url:"/following-done",dataType:"html",success:followingFeed.showResults})},followingFeed.prependNewFeedItems=function(a){$(".inline-grey-loading-container.following-feed").remove();if(a&&a!=" "){var b=$(".collection-container",a).length;b>0&&$(".no-results.following-feed").remove(),$("#load-inline").after(a);var c=$(".collection-container"),d=c.length!=b;if(d){var e=c.length-1;for(var f=e;f>e-b;f--)$(c[f]).remove()}onZinesLoaded(),affiliateLinks()}},followingFeed.applyHiddenFields=function(){followingFeed.applyUserRows(),followingFeed.applyHelpTexts()},followingFeed.applyUserRows=function(){$(".user-rows").find(".user-row").each(function(){slug=$(this).attr("data-slug"),$(".collection-container").find(".user-row-"+slug).replaceWith($(this))})},followingFeed.applyHelpTexts=function(){$(".help-texts").find(".help-text-container").each(function(){slug=$(this).attr("data-slug"),$(".collection-container").find(".help-text-container-"+slug).replaceWith($(this))})}}(),function(){var a;a=function(){function i(){}var a,b,c,d,e,f,g,h;return c=null,g=function(){return $("#dim").show(),$("#signon-container").show(),$("#signin_user_email").focus(),_gaq.push(["_trackEvent","Sessions","Sign in Popover Viewed"])},e=function(){return $("#dim").hide(),$("#signon-container").hide()},a=function(a){return $(".facebook-required").bindFirst("click submit",function(a){var b,d;c=$(a.target),b={},d=$("#signon-container").data("is_fb_authed")===!1,c.data("no_redirect")===!0&&(b.no_redirect="t"),c.data("can_publish")===!1&&(b.scope="publish_actions",d=!0);if(d)return popups.fbPopup(b)})},window.bindFacebookRequired=a,b=function(a){return $(".signin-required").bindFirst("click submit",function(a){if($("#signon-container").data("is_signed_in")===!1)return c=$(this),$(".inline-errors").hide(),$("#signin-popup-form li, #signin-popup-form li input").removeClass("error"),a.stopImmediatePropagation(),a.preventDefault(),g()})},$(document).on("click",".close-button",function(){return e()}),$(document).on("ajax:success","#signin-form-container .formtastic",function(a,b,c,d){return window.signonResponse(a,b,c,d,"#signin-form-container")}),window.signonResponse=function(a,b,d,f,g){if(f.status!==201)return $(g).html(b);e(),$("#signon-container").data("is_signed_in",!0),$("#app-header").html(b),c!==null&&c.click();if($(g).data("reload_page")!==!1&&$("#signup-container").data("redirect")==="root_path")return document.location.href="/";if($(g).data("reload_page")!==!1)return document.location.reload()},i.showAlternateSignup=function(){return $("#signup-form-container-full").show(),$("#signup-methods").hide(),$("#messaging").hide(),$("#signup_user_first_name").focus(),$(".end").hide(),$("#signup-form-container #new_user #user_submit_action input").attr("disabled","disabled"),h()},window.signup={},window.signup.showAlternateSignup=i.showAlternateSignup,i.shiftHoverIconUp=function(){return $(".upload-button-hover-icon").css("top","-96px")},i.shiftHoverIconDown=function(){return $(".upload-button-hover-icon").css("top","-76px")},i.disableFormElementsAndSubmit=function(){return $(".signup-form input").attr("disabled",!0),$("#user_first_name").val($("#signup_user_first_name").val()),$("#user_last_name").val($("#signup_user_last_name").val()),$("#user_email").val($("#signup_user_email").val()),$("#user_location").val($("#signup_user_location").val()),$("#signup-photo-form").submit(),$("#user_avatar").hide(),$(".photo-container .loader").show(),$("#signup_user_first_name").focus(),$("#signup-form-container #user_submit_action input").attr("disabled","disabled")},$(document).on("ready",b),$(document).on("ready",a),$(document).on("pjax:success","#content-container",b),$(document).on("ajax:success",".gem-icon",b),$(document).on("ajax:success","#request-more",b),$(document).on("ajax:success","#request-more-finds",b),$(document).on("ajax:success",".preview-image img",b),$(document).on("ajax:success","#share-hunt-options",b),$(document).on("click","#alternate-signup a",i.showAlternateSignup),$(document).on("click","#upload-photo-button",function(){return $("#user_user_image").click()}),$(document).on("click","#user_avatar",function(){return $("#user_user_image").click()}),$(document).on("change","#user_user_image",i.disableFormElementsAndSubmit),$("#upload-photo-button").hover(i.shiftHoverIconUp,i.shiftHoverIconDown),$("#signup-form-container .signup-form").parsley({validators:{password:function(a,b){return a.length>=b}},messages:{required:"Use your first name",type:{email:"Use a valid email address"},password:"A minimum of 5 characters and use letters, numbers & special characters"}}),d=function(){return $("#user_submit_action input").removeAttr("disabled"),$("#user_submit_action input").addClass("enabled"),$("#continue-section").css("visibility","visible")},f=function(){return $("#signup_user_first_name").parsley("validate")&&$("#signup_user_email").parsley("validate")&&($("#signup_user_password_input").length===0||$("#signup_user_password").parsley("validate")===!0)},h=function(){var a;return $(".signup-form").parsley("validate"),a=f(),a&&d(),$(".signup-form").on("keyup",function(){return a?d():($("#signup_form_container #user_submit_action input").attr("disabled","disabled"),$("#user_submit_action input").removeClass("enabled"),$("#continue-section").css("visibility","hidden"))}),!0},$("#signup_user_first_name").on("keyup",function(){return $("#first-name-error").hide()}),$("#signup_user_email").on("keyup",function(){return $(".email p").hide()}),$("#signup_user_password").on("keyup",function(){return $("#password-error").hide()}),$("#signup_user_password").on("focus",function(){return $("#signup_user_password").get(0).type="text"}),$("#signup_user_password").on("focusout",function(){return $("#signup_user_password").get(0).type="password"}),$("#settings_user_password").on("focus",function(){return $("#settings_user_password").get(0).type="text"}),$("#settings_user_password").on("focusout",function(){return $("#settings_user_password").get(0).type="password"}),$("#signup-form-container .signup-form").on("keyup",h),$(document).on("ready",function(){return h()}),i}()}.call(this),function(){var a,b;a=function(){return $("#dim").hide(),$("#invite-container").hide()},b=function(){return $("#dim").show(),$("#invite-container").show("fade")},$(document).on("click","#email-invite",function(){return b()}),$(document).on("click",".close-button",function(){return a()}),$(document).on("ajax:success","#invite-form-container .formtastic",function(b,c,d,e){return e.status===201?(a(),alert("Your invites have been sent!")):$("#invite-container").html(c)})}.call(this),function(a,b){function c(b){var c=b.attributes["data-type"].nodeValue,f=b.attributes["data-image-url"].nodeValue,g=b.attributes["data-source-url"].nodeValue,h="54px",i="62px";c==="horizontal"?(h="88px;",i="20px;"):c==="no-count"?(h="54px;",i="20px;"):c==="mini"&&(h="21px;",i="20px;");if(g==null||g.length==0)g=a.location.toString();var j=d(c,f,g),k=e(j,h,i);b.parentNode.replaceChild(k,b)}function d(a,b,c){return f.whiWebsite+"/heart-it?button_type="+a+"&image_url="+encodeURIComponent(b)+"&source_url="+encodeURIComponent(c)}function e(a,c,d){var e=b.createElement("iframe");return e.setAttribute("allowtransparency","true"),e.setAttribute("frameborder","0"),e.setAttribute("scrolling","no"),e.setAttribute("src",a),e.setAttribute("style","width: "+c+"; height: "+d),e}"use strict";var f=a.whi||{};f.whiWebsite||(f.whiWebsite="//weheartit.com"),f.HeartItWidget=function(){var a=b.querySelectorAll(".heart-it-button");for(var d=0;d<a.length;d++)c(a[d])},f.HeartItWidget()}(window,document),function(){var a,b,c;c=!0,b=!1,$(window).load(function(){return $("#container").on("mouseenter",".gem-button",function(){return a.get($(this)).update(c)}),$("#container").on("mouseleave",".gem-button",function(){return a.get($(this)).update(b)}),$("#container").on("click",".gem-button",function(){return a.get($(this)).toggleGemmed()})}),a=function(){function a(a){this.isHover=!1,this.button=a,this.update()}return a.buttons=[],a.map=function(b){return a.buttons[b.attr("id")]=new a(b)},a.get=function(b){var c;return c=a.buttons[b.attr("id")],c==null?a.map(b):c},a.prototype.isGemmed=function(){return this.button.hasClass("gemd")},a.prototype.setGemmed=function(a){return this.button.removeClass("gemd ungemd"),this.button.addClass(a?"gemd":"ungemd"),this.update(this.isHover),this.button.data("method",a?"post":"delete")},a.prototype.toggleGemmed=function(){return this.setGemmed(!this.isGemmed())},a.prototype.toggleHover=function(){return this.update(!this.isHover)},a.prototype.update=function(a){var b;return this.isHover=a,b=this.isGemmed(),this.setText(b,a),this.setIcon(b,a)},a.prototype.setText=function(a,b){var c;return this.button.find(".button-text").hide(),c=a&&b?".ungem":a&&!b?".gemd":".gem",this.button.find(c).attr("style","display: inline-block;")},a.prototype.setIcon=function(a,b){return this.button.find(".gem-button-icon").hide(),this.button.find(a?".liked":".unliked").show()},a}()}.call(this),function(a){typeof a.fn.each2=="undefined"&&a.extend(a.fn,{each2:function(b){var c=a([0]),d=-1,e=this.length;while(++d<e&&(c.context=c[0]=this[d])&&b.call(c[0],d,c)!==!1);return this}})}(jQuery),function(a,b){function n(a){var b,c,d,e;if(!a||a.length<1)return a;b="";for(c=0,d=a.length;c<d;c++)e=a.charAt(c),b+=m[e]||e;return b}function o(a,b){var c=0,d=b.length;for(;c<d;c+=1)if(q(a,b[c]))return c;return-1}function p(){var b=a(l);b.appendTo("body");var c={width:b.width()-b[0].clientWidth,height:b.height()-b[0].clientHeight};return b.remove(),c}function q(a,c){return a===c?!0:a===b||c===b?!1:a===null||c===null?!1:a.constructor===String?a+""==c+"":c.constructor===String?c+""==a+"":!1}function r(b,c){var d,e,f;if(b===null||b.length<1)return[];d=b.split(c);for(e=0,f=d.length;e<f;e+=1)d[e]=a.trim(d[e]);return d}function s(a){return a.outerWidth(!1)-a.width()}function t(c){var d="keyup-change-value";c.on("keydown",function(){a.data(c,d)===b&&a.data(c,d,c.val())}),c.on("keyup",function(){var e=a.data(c,d);e!==b&&c.val()!==e&&(a.removeData(c,d),c.trigger("keyup-change"))})}function u(c){c.on("mousemove",function(c){var d=i;(d===b||d.x!==c.pageX||d.y!==c.pageY)&&a(c.target).trigger("mousemove-filtered",c)})}function v(a,c,d){d=d||b;var e;return function(){var b=arguments;window.clearTimeout(e),e=window.setTimeout(function(){c.apply(d,b)},a)}}function w(a){var b=!1,c;return function(){return b===!1&&(c=a(),b=!0),c}}function x(a,b){var c=v(a,function(a){b.trigger("scroll-debounced",a)});b.on("scroll",function(a){o(a.target,b.get())>=0&&c(a)})}function y(a){if(a[0]===document.activeElement)return;window.setTimeout(function(){var b=a[0],c=a.val().length,d;a.focus(),a.is(":visible")&&b===document.activeElement&&(b.setSelectionRange?b.setSelectionRange(c,c):b.createTextRange&&(d=b.createTextRange(),d.collapse(!1),d.select()))},0)}function z(b){b=a(b)[0];var c=0,d=0;if("selectionStart"in b)c=b.selectionStart,d=b.selectionEnd-c;else if("selection"in document){b.focus();var e=document.selection.createRange();d=document.selection.createRange().text.length,e.moveStart("character",-b.value.length),c=e.text.length-d}return{offset:c,length:d}}function A(a){a.preventDefault(),a.stopPropagation()}function B(a){a.preventDefault(),a.stopImmediatePropagation()}function C(b){if(!h){var c=b[0].currentStyle||window.getComputedStyle(b[0],null);h=a(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:c.fontSize,fontFamily:c.fontFamily,fontStyle:c.fontStyle,fontWeight:c.fontWeight,letterSpacing:c.letterSpacing,textTransform:c.textTransform,whiteSpace:"nowrap"}),h.attr("class","select2-sizer"),a("body").append(h)}return h.text(b.val()),h.width()}function D(b,c,d){var e,f=[],g;e=b.attr("class"),e&&(e=""+e,a(e.split(" ")).each2(function(){this.indexOf("select2-")===0&&f.push(this)})),e=c.attr("class"),e&&(e=""+e,a(e.split(" ")).each2(function(){this.indexOf("select2-")!==0&&(g=d(this),g&&f.push(this))})),b.attr("class",f.join(" "))}function E(a,b,c,d){var e=n(a.toUpperCase()).indexOf(n(b.toUpperCase())),f=b.length;if(e<0){c.push(d(a));return}c.push(d(a.substring(0,e))),c.push("<span class='select2-match'>"),c.push(d(a.substring(e,e+f))),c.push("</span>"),c.push(d(a.substring(e+f,a.length)))}function F(a){var b={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return String(a).replace(/[&<>"'\/\\]/g,function(a){return b[a]})}function G(c){var d,e=null,f=c.quietMillis||100,g=c.url,h=this;return function(i){window.clearTimeout(d),d=window.setTimeout(function(){var d=c.data,f=g,j=c.transport||a.fn.select2.ajaxDefaults.transport,k={type:c.type||"GET",cache:c.cache||!1,jsonpCallback:c.jsonpCallback||b,dataType:c.dataType||"json"},l=a.extend({},a.fn.select2.ajaxDefaults.params,k);d=d?d.call(h,i.term,i.page,i.context):null,f=typeof f=="function"?f.call(h,i.term,i.page,i.context):f,e&&e.abort(),c.params&&(a.isFunction(c.params)?a.extend(l,c.params.call(h)):a.extend(l,c.params)),a.extend(l,{url:f,dataType:c.dataType,data:d,success:function(a){var b=c.results(a,i.page);i.callback(b)}}),e=j.call(h,l)},f)}}function H(b){var c=b,d,e,f=function(a){return""+a.text};a.isArray(c)&&(e=c,c={results:e}),a.isFunction(c)===!1&&(e=c,c=function(){return e});var g=c();return g.text&&(f=g.text,a.isFunction(f)||(d=g.text,f=function(a){return a[d]})),function(b){var d=b.term,e={results:[]},g;if(d===""){b.callback(c());return}g=function(c,e){var h,i;c=c[0];if(c.children){h={};for(i in c)c.hasOwnProperty(i)&&(h[i]=c[i]);h.children=[],a(c.children).each2(function(a,b){g(b,h.children)}),(h.children.length||b.matcher(d,f(h),c))&&e.push(h)}else b.matcher(d,f(c),c)&&e.push(c)},a(c().results).each2(function(a,b){g(b,e.results)}),b.callback(e)}}function I(c){var d=a.isFunction(c);return function(e){var f=e.term,g={results:[]};a(d?c():c).each(function(){var a=this.text!==b,c=a?this.text:this;(f===""||e.matcher(f,c))&&g.results.push(a?this:{id:this,text:this})}),e.callback(g)}}function J(b,c){if(a.isFunction(b))return!0;if(!b)return!1;throw new Error(c+" must be a function or a falsy value")}function K(b){return a.isFunction(b)?b():b}function L(b){var c=0;return a.each(b,function(a,b){b.children?c+=L(b.children):c++}),c}function M(a,c,d,e){var f=a,g=!1,h,i,j,k,l;if(!e.createSearchChoice||!e.tokenSeparators||e.tokenSeparators.length<1)return b;for(;;){i=-1;for(j=0,k=e.tokenSeparators.length;j<k;j++){l=e.tokenSeparators[j],i=a.indexOf(l);if(i>=0)break}if(i<0)break;h=a.substring(0,i),a=a.substring(i+l.length);if(h.length>0){h=e.createSearchChoice.call(this,h,c);if(h!==b&&h!==null&&e.id(h)!==b&&e.id(h)!==null){g=!1;for(j=0,k=c.length;j<k;j++)if(q(e.id(h),e.id(c[j]))){g=!0;break}g||d(h)}}}if(f!==a)return a}function N(b,c){var d=function(){};return d.prototype=new b,d.prototype.constructor=d,d.prototype.parent=b.prototype,d.prototype=a.extend(d.prototype,c),d}"use strict";if(window.Select2!==b)return;var c,d,e,f,g,h,i={x:0,y:0},j,k,c={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(a){a=a.which?a.which:a;switch(a){case c.LEFT:case c.RIGHT:case c.UP:case c.DOWN:return!0}return!1},isControl:function(a){var b=a.which;switch(b){case c.SHIFT:case c.CTRL:case c.ALT:return!0}return a.metaKey?!0:!1},isFunctionKey:function(a){return a=a.which?a.which:a,a>=112&&a<=123}},l="<div class='select2-measure-scrollbar'></div>",m={"Ⓐ":"A","Ａ":"A","À":"A","Á":"A","Â":"A","Ầ":"A","Ấ":"A","Ẫ":"A","Ẩ":"A","Ã":"A","Ā":"A","Ă":"A","Ằ":"A","Ắ":"A","Ẵ":"A","Ẳ":"A","Ȧ":"A","Ǡ":"A","Ä":"A","Ǟ":"A","Ả":"A","Å":"A","Ǻ":"A","Ǎ":"A","Ȁ":"A","Ȃ":"A","Ạ":"A","Ậ":"A","Ặ":"A","Ḁ":"A","Ą":"A","Ⱥ":"A","Ɐ":"A","Ꜳ":"AA","Æ":"AE","Ǽ":"AE","Ǣ":"AE","Ꜵ":"AO","Ꜷ":"AU","Ꜹ":"AV","Ꜻ":"AV","Ꜽ":"AY","Ⓑ":"B","Ｂ":"B","Ḃ":"B","Ḅ":"B","Ḇ":"B","Ƀ":"B","Ƃ":"B","Ɓ":"B","Ⓒ":"C","Ｃ":"C","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","Ç":"C","Ḉ":"C","Ƈ":"C","Ȼ":"C","Ꜿ":"C","Ⓓ":"D","Ｄ":"D","Ḋ":"D","Ď":"D","Ḍ":"D","Ḑ":"D","Ḓ":"D","Ḏ":"D","Đ":"D","Ƌ":"D","Ɗ":"D","Ɖ":"D","Ꝺ":"D","Ǳ":"DZ","Ǆ":"DZ","ǲ":"Dz","ǅ":"Dz","Ⓔ":"E","Ｅ":"E","È":"E","É":"E","Ê":"E","Ề":"E","Ế":"E","Ễ":"E","Ể":"E","Ẽ":"E","Ē":"E","Ḕ":"E","Ḗ":"E","Ĕ":"E","Ė":"E","Ë":"E","Ẻ":"E","Ě":"E","Ȅ":"E","Ȇ":"E","Ẹ":"E","Ệ":"E","Ȩ":"E","Ḝ":"E","Ę":"E","Ḙ":"E","Ḛ":"E","Ɛ":"E","Ǝ":"E","Ⓕ":"F","Ｆ":"F","Ḟ":"F","Ƒ":"F","Ꝼ":"F","Ⓖ":"G","Ｇ":"G","Ǵ":"G","Ĝ":"G","Ḡ":"G","Ğ":"G","Ġ":"G","Ǧ":"G","Ģ":"G","Ǥ":"G","Ɠ":"G","Ꞡ":"G","Ᵹ":"G","Ꝿ":"G","Ⓗ":"H","Ｈ":"H","Ĥ":"H","Ḣ":"H","Ḧ":"H","Ȟ":"H","Ḥ":"H","Ḩ":"H","Ḫ":"H","Ħ":"H","Ⱨ":"H","Ⱶ":"H","Ɥ":"H","Ⓘ":"I","Ｉ":"I","Ì":"I","Í":"I","Î":"I","Ĩ":"I","Ī":"I","Ĭ":"I","İ":"I","Ï":"I","Ḯ":"I","Ỉ":"I","Ǐ":"I","Ȉ":"I","Ȋ":"I","Ị":"I","Į":"I","Ḭ":"I","Ɨ":"I","Ⓙ":"J","Ｊ":"J","Ĵ":"J","Ɉ":"J","Ⓚ":"K","Ｋ":"K","Ḱ":"K","Ǩ":"K","Ḳ":"K","Ķ":"K","Ḵ":"K","Ƙ":"K","Ⱪ":"K","Ꝁ":"K","Ꝃ":"K","Ꝅ":"K","Ꞣ":"K","Ⓛ":"L","Ｌ":"L","Ŀ":"L","Ĺ":"L","Ľ":"L","Ḷ":"L","Ḹ":"L","Ļ":"L","Ḽ":"L","Ḻ":"L","Ł":"L","Ƚ":"L","Ɫ":"L","Ⱡ":"L","Ꝉ":"L","Ꝇ":"L","Ꞁ":"L","Ǉ":"LJ","ǈ":"Lj","Ⓜ":"M","Ｍ":"M","Ḿ":"M","Ṁ":"M","Ṃ":"M","Ɱ":"M","Ɯ":"M","Ⓝ":"N","Ｎ":"N","Ǹ":"N","Ń":"N","Ñ":"N","Ṅ":"N","Ň":"N","Ṇ":"N","Ņ":"N","Ṋ":"N","Ṉ":"N","Ƞ":"N","Ɲ":"N","Ꞑ":"N","Ꞥ":"N","Ǌ":"NJ","ǋ":"Nj","Ⓞ":"O","Ｏ":"O","Ò":"O","Ó":"O","Ô":"O","Ồ":"O","Ố":"O","Ỗ":"O","Ổ":"O","Õ":"O","Ṍ":"O","Ȭ":"O","Ṏ":"O","Ō":"O","Ṑ":"O","Ṓ":"O","Ŏ":"O","Ȯ":"O","Ȱ":"O","Ö":"O","Ȫ":"O","Ỏ":"O","Ő":"O","Ǒ":"O","Ȍ":"O","Ȏ":"O","Ơ":"O","Ờ":"O","Ớ":"O","Ỡ":"O","Ở":"O","Ợ":"O","Ọ":"O","Ộ":"O","Ǫ":"O","Ǭ":"O","Ø":"O","Ǿ":"O","Ɔ":"O","Ɵ":"O","Ꝋ":"O","Ꝍ":"O","Ƣ":"OI","Ꝏ":"OO","Ȣ":"OU","Ⓟ":"P","Ｐ":"P","Ṕ":"P","Ṗ":"P","Ƥ":"P","Ᵽ":"P","Ꝑ":"P","Ꝓ":"P","Ꝕ":"P","Ⓠ":"Q","Ｑ":"Q","Ꝗ":"Q","Ꝙ":"Q","Ɋ":"Q","Ⓡ":"R","Ｒ":"R","Ŕ":"R","Ṙ":"R","Ř":"R","Ȑ":"R","Ȓ":"R","Ṛ":"R","Ṝ":"R","Ŗ":"R","Ṟ":"R","Ɍ":"R","Ɽ":"R","Ꝛ":"R","Ꞧ":"R","Ꞃ":"R","Ⓢ":"S","Ｓ":"S","ẞ":"S","Ś":"S","Ṥ":"S","Ŝ":"S","Ṡ":"S","Š":"S","Ṧ":"S","Ṣ":"S","Ṩ":"S","Ș":"S","Ş":"S","Ȿ":"S","Ꞩ":"S","Ꞅ":"S","Ⓣ":"T","Ｔ":"T","Ṫ":"T","Ť":"T","Ṭ":"T","Ț":"T","Ţ":"T","Ṱ":"T","Ṯ":"T","Ŧ":"T","Ƭ":"T","Ʈ":"T","Ⱦ":"T","Ꞇ":"T","Ꜩ":"TZ","Ⓤ":"U","Ｕ":"U","Ù":"U","Ú":"U","Û":"U","Ũ":"U","Ṹ":"U","Ū":"U","Ṻ":"U","Ŭ":"U","Ü":"U","Ǜ":"U","Ǘ":"U","Ǖ":"U","Ǚ":"U","Ủ":"U","Ů":"U","Ű":"U","Ǔ":"U","Ȕ":"U","Ȗ":"U","Ư":"U","Ừ":"U","Ứ":"U","Ữ":"U","Ử":"U","Ự":"U","Ụ":"U","Ṳ":"U","Ų":"U","Ṷ":"U","Ṵ":"U","Ʉ":"U","Ⓥ":"V","Ｖ":"V","Ṽ":"V","Ṿ":"V","Ʋ":"V","Ꝟ":"V","Ʌ":"V","Ꝡ":"VY","Ⓦ":"W","Ｗ":"W","Ẁ":"W","Ẃ":"W","Ŵ":"W","Ẇ":"W","Ẅ":"W","Ẉ":"W","Ⱳ":"W","Ⓧ":"X","Ｘ":"X","Ẋ":"X","Ẍ":"X","Ⓨ":"Y","Ｙ":"Y","Ỳ":"Y","Ý":"Y","Ŷ":"Y","Ỹ":"Y","Ȳ":"Y","Ẏ":"Y","Ÿ":"Y","Ỷ":"Y","Ỵ":"Y","Ƴ":"Y","Ɏ":"Y","Ỿ":"Y","Ⓩ":"Z","Ｚ":"Z","Ź":"Z","Ẑ":"Z","Ż":"Z","Ž":"Z","Ẓ":"Z","Ẕ":"Z","Ƶ":"Z","Ȥ":"Z","Ɀ":"Z","Ⱬ":"Z","Ꝣ":"Z","ⓐ":"a","ａ":"a","ẚ":"a","à":"a","á":"a","â":"a","ầ":"a","ấ":"a","ẫ":"a","ẩ":"a","ã":"a","ā":"a","ă":"a","ằ":"a","ắ":"a","ẵ":"a","ẳ":"a","ȧ":"a","ǡ":"a","ä":"a","ǟ":"a","ả":"a","å":"a","ǻ":"a","ǎ":"a","ȁ":"a","ȃ":"a","ạ":"a","ậ":"a","ặ":"a","ḁ":"a","ą":"a","ⱥ":"a","ɐ":"a","ꜳ":"aa","æ":"ae","ǽ":"ae","ǣ":"ae","ꜵ":"ao","ꜷ":"au","ꜹ":"av","ꜻ":"av","ꜽ":"ay","ⓑ":"b","ｂ":"b","ḃ":"b","ḅ":"b","ḇ":"b","ƀ":"b","ƃ":"b","ɓ":"b","ⓒ":"c","ｃ":"c","ć":"c","ĉ":"c","ċ":"c","č":"c","ç":"c","ḉ":"c","ƈ":"c","ȼ":"c","ꜿ":"c","ↄ":"c","ⓓ":"d","ｄ":"d","ḋ":"d","ď":"d","ḍ":"d","ḑ":"d","ḓ":"d","ḏ":"d","đ":"d","ƌ":"d","ɖ":"d","ɗ":"d","ꝺ":"d","ǳ":"dz","ǆ":"dz","ⓔ":"e","ｅ":"e","è":"e","é":"e","ê":"e","ề":"e","ế":"e","ễ":"e","ể":"e","ẽ":"e","ē":"e","ḕ":"e","ḗ":"e","ĕ":"e","ė":"e","ë":"e","ẻ":"e","ě":"e","ȅ":"e","ȇ":"e","ẹ":"e","ệ":"e","ȩ":"e","ḝ":"e","ę":"e","ḙ":"e","ḛ":"e","ɇ":"e","ɛ":"e","ǝ":"e","ⓕ":"f","ｆ":"f","ḟ":"f","ƒ":"f","ꝼ":"f","ⓖ":"g","ｇ":"g","ǵ":"g","ĝ":"g","ḡ":"g","ğ":"g","ġ":"g","ǧ":"g","ģ":"g","ǥ":"g","ɠ":"g","ꞡ":"g","ᵹ":"g","ꝿ":"g","ⓗ":"h","ｈ":"h","ĥ":"h","ḣ":"h","ḧ":"h","ȟ":"h","ḥ":"h","ḩ":"h","ḫ":"h","ẖ":"h","ħ":"h","ⱨ":"h","ⱶ":"h","ɥ":"h","ƕ":"hv","ⓘ":"i","ｉ":"i","ì":"i","í":"i","î":"i","ĩ":"i","ī":"i","ĭ":"i","ï":"i","ḯ":"i","ỉ":"i","ǐ":"i","ȉ":"i","ȋ":"i","ị":"i","į":"i","ḭ":"i","ɨ":"i","ı":"i","ⓙ":"j","ｊ":"j","ĵ":"j","ǰ":"j","ɉ":"j","ⓚ":"k","ｋ":"k","ḱ":"k","ǩ":"k","ḳ":"k","ķ":"k","ḵ":"k","ƙ":"k","ⱪ":"k","ꝁ":"k","ꝃ":"k","ꝅ":"k","ꞣ":"k","ⓛ":"l","ｌ":"l","ŀ":"l","ĺ":"l","ľ":"l","ḷ":"l","ḹ":"l","ļ":"l","ḽ":"l","ḻ":"l","ſ":"l","ł":"l","ƚ":"l","ɫ":"l","ⱡ":"l","ꝉ":"l","ꞁ":"l","ꝇ":"l","ǉ":"lj","ⓜ":"m","ｍ":"m","ḿ":"m","ṁ":"m","ṃ":"m","ɱ":"m","ɯ":"m","ⓝ":"n","ｎ":"n","ǹ":"n","ń":"n","ñ":"n","ṅ":"n","ň":"n","ṇ":"n","ņ":"n","ṋ":"n","ṉ":"n","ƞ":"n","ɲ":"n","ŉ":"n","ꞑ":"n","ꞥ":"n","ǌ":"nj","ⓞ":"o","ｏ":"o","ò":"o","ó":"o","ô":"o","ồ":"o","ố":"o","ỗ":"o","ổ":"o","õ":"o","ṍ":"o","ȭ":"o","ṏ":"o","ō":"o","ṑ":"o","ṓ":"o","ŏ":"o","ȯ":"o","ȱ":"o","ö":"o","ȫ":"o","ỏ":"o","ő":"o","ǒ":"o","ȍ":"o","ȏ":"o","ơ":"o","ờ":"o","ớ":"o","ỡ":"o","ở":"o","ợ":"o","ọ":"o","ộ":"o","ǫ":"o","ǭ":"o","ø":"o","ǿ":"o","ɔ":"o","ꝋ":"o","ꝍ":"o","ɵ":"o","ƣ":"oi","ȣ":"ou","ꝏ":"oo","ⓟ":"p","ｐ":"p","ṕ":"p","ṗ":"p","ƥ":"p","ᵽ":"p","ꝑ":"p","ꝓ":"p","ꝕ":"p","ⓠ":"q","ｑ":"q","ɋ":"q","ꝗ":"q","ꝙ":"q","ⓡ":"r","ｒ":"r","ŕ":"r","ṙ":"r","ř":"r","ȑ":"r","ȓ":"r","ṛ":"r","ṝ":"r","ŗ":"r","ṟ":"r","ɍ":"r","ɽ":"r","ꝛ":"r","ꞧ":"r","ꞃ":"r","ⓢ":"s","ｓ":"s","ß":"s","ś":"s","ṥ":"s","ŝ":"s","ṡ":"s","š":"s","ṧ":"s","ṣ":"s","ṩ":"s","ș":"s","ş":"s","ȿ":"s","ꞩ":"s","ꞅ":"s","ẛ":"s","ⓣ":"t","ｔ":"t","ṫ":"t","ẗ":"t","ť":"t","ṭ":"t","ț":"t","ţ":"t","ṱ":"t","ṯ":"t","ŧ":"t","ƭ":"t","ʈ":"t","ⱦ":"t","ꞇ":"t","ꜩ":"tz","ⓤ":"u","ｕ":"u","ù":"u","ú":"u","û":"u","ũ":"u","ṹ":"u","ū":"u","ṻ":"u","ŭ":"u","ü":"u","ǜ":"u","ǘ":"u","ǖ":"u","ǚ":"u","ủ":"u","ů":"u","ű":"u","ǔ":"u","ȕ":"u","ȗ":"u","ư":"u","ừ":"u","ứ":"u","ữ":"u","ử":"u","ự":"u","ụ":"u","ṳ":"u","ų":"u","ṷ":"u","ṵ":"u","ʉ":"u","ⓥ":"v","ｖ":"v","ṽ":"v","ṿ":"v","ʋ":"v","ꝟ":"v","ʌ":"v","ꝡ":"vy","ⓦ":"w","ｗ":"w","ẁ":"w","ẃ":"w","ŵ":"w","ẇ":"w","ẅ":"w","ẘ":"w","ẉ":"w","ⱳ":"w","ⓧ":"x","ｘ":"x","ẋ":"x","ẍ":"x","ⓨ":"y","ｙ":"y","ỳ":"y","ý":"y","ŷ":"y","ỹ":"y","ȳ":"y","ẏ":"y","ÿ":"y","ỷ":"y","ẙ":"y","ỵ":"y","ƴ":"y","ɏ":"y","ỿ":"y","ⓩ":"z","ｚ":"z","ź":"z","ẑ":"z","ż":"z","ž":"z","ẓ":"z","ẕ":"z","ƶ":"z","ȥ":"z","ɀ":"z","ⱬ":"z","ꝣ":"z"};j=a(document),g=function(){var a=1;return function(){return a++}}(),j.on("mousemove",function(a){i.x=a.pageX,i.y=a.pageY}),d=N(Object,{bind:function(a){var b=this;return function(){a.apply(b,arguments)}},init:function(c){var d,e,f=".select2-results",h,i;this.opts=c=this.prepareOpts(c),this.id=c.id,c.element.data("select2")!==b&&c.element.data("select2")!==null&&c.element.data("select2").destroy(),this.container=this.createContainer(),this.containerId="s2id_"+(c.element.attr("id")||"autogen"+g()),this.containerSelector="#"+this.containerId.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"),this.container.attr("id",this.containerId),this.body=w(function(){return c.element.closest("body")}),D(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.attr("style",c.element.attr("style")),this.container.css(K(c.containerCss)),this.container.addClass(K(c.containerCssClass)),this.elementTabIndex=this.opts.element.attr("tabindex"),this.opts.element.data("select2",this).attr("tabindex","-1").before(this.container).on("click.select2",A),this.container.data("select2",this),this.dropdown=this.container.find(".select2-drop"),D(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(K(c.dropdownCssClass)),this.dropdown.data("select2",this),this.dropdown.on("click",A),this.results=d=this.container.find(f),this.search=e=this.container.find("input.select2-input"),this.queryCount=0,this.resultsPage=0,this.context=null,this.initContainer(),this.container.on("click",A),u(this.results),this.dropdown.on("mousemove-filtered touchstart touchmove touchend",f,this.bind(this.highlightUnderEvent)),x(80,this.results),this.dropdown.on("scroll-debounced",f,this.bind(this.loadMoreIfNeeded)),a(this.container).on("change",".select2-input",function(a){a.stopPropagation()}),a(this.dropdown).on("change",".select2-input",function(a){a.stopPropagation()}),a.fn.mousewheel&&d.mousewheel(function(a,b,c,e){var f=d.scrollTop(),g;e>0&&f-e<=0?(d.scrollTop(0),A(a)):e<0&&d.get(0).scrollHeight-d.scrollTop()+e<=d.height()&&(d.scrollTop(d.get(0).scrollHeight-d.height()),A(a))}),t(e),e.on("keyup-change input paste",this.bind(this.updateResults)),e.on("focus",function(){e.addClass("select2-focused")}),e.on("blur",function(){e.removeClass("select2-focused")}),this.dropdown.on("mouseup",f,this.bind(function(b){a(b.target).closest(".select2-result-selectable").length>0&&(this.highlightUnderEvent(b),this.selectHighlighted(b))})),this.dropdown.on("click mouseup mousedown",function(a){a.stopPropagation()}),a.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource()),c.maximumInputLength!==null&&this.search.attr("maxlength",c.maximumInputLength);var h=c.element.prop("disabled");h===b&&(h=!1),this.enable(!h);var i=c.element.prop("readonly");i===b&&(i=!1),this.readonly(i),k=k||p(),this.autofocus=c.element.prop("autofocus"),c.element.prop("autofocus",!1),this.autofocus&&this.focus(),this.nextSearchTerm=b},destroy:function(){var a=this.opts.element,c=a.data("select2");this.close(),this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),c!==b&&(c.container.remove(),c.dropdown.remove(),a.removeClass("select2-offscreen").removeData("select2").off(".select2").prop("autofocus",this.autofocus||!1),this.elementTabIndex?a.attr({tabindex:this.elementTabIndex}):a.removeAttr("tabindex"),a.show())},optionToData:function(a){if(a.is("option"))return{id:a.prop("value"),text:a.text(),element:a.get(),css:a.attr("class"),disabled:a.prop("disabled"),locked:q(a.attr("locked"),"locked")||q(a.data("locked"),!0)};if(a.is("optgroup"))return{text:a.attr("label"),children:[],element:a.get(),css:a.attr("class")}},prepareOpts:function(c){var d,e,f,g,h=this;d=c.element,d.get(0).tagName.toLowerCase()==="select"&&(this.select=e=c.element),e&&a.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in c)throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")}),c=a.extend({},{populateResults:function(d,e,f){var g,i,j,k,l=this.opts.id;g=function(d,e,i){var j,k,m,n,o,p,q,r,s,t;d=c.sortResults(d,e,f);for(j=0,k=d.length;j<k;j+=1)m=d[j],o=m.disabled===!0,n=!o&&l(m)!==b,p=m.children&&m.children.length>0,q=a("<li></li>"),q.addClass("select2-results-dept-"+i),q.addClass("select2-result"),q.addClass(n?"select2-result-selectable":"select2-result-unselectable"),o&&q.addClass("select2-disabled"),p&&q.addClass("select2-result-with-children"),q.addClass(h.opts.formatResultCssClass(m)),r=a(document.createElement("div")),r.addClass("select2-result-label"),t=c.formatResult(m,r,f,h.opts.escapeMarkup),t!==b&&r.html(t),q.append(r),p&&(s=a("<ul></ul>"),s.addClass("select2-result-sub"),g(m.children,s,i+1),q.append(s)),q.data("select2-data",m),e.append(q)},g(e,d,0)}},a.fn.select2.defaults,c),typeof c.id!="function"&&(f=c.id,c.id=function(a){return a[f]});if(a.isArray(c.element.data("select2Tags"))){if("tags"in c)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+c.element.attr("id");c.tags=c.element.data("select2Tags")}e?(c.query=this.bind(function(a){var c={results:[],more:!1},e=a.term,f,g,i;i=function(b,c){var d;b.is("option")?a.matcher(e,b.text(),b)&&c.push(h.optionToData(b)):b.is("optgroup")&&(d=h.optionToData(b),b.children().each2(function(a,b){i(b,d.children)}),d.children.length>0&&c.push(d))},f=d.children(),this.getPlaceholder()!==b&&f.length>0&&(g=this.getPlaceholderOption(),g&&(f=f.not(g))),f.each2(function(a,b){i(b,c.results)}),a.callback(c)}),c.id=function(a){return a.id},c.formatResultCssClass=function(a){return a.css}):"query"in c||("ajax"in c?(g=c.element.data("ajax-url"),g&&g.length>0&&(c.ajax.url=g),c.query=G.call(c.element,c.ajax)):"data"in c?c.query=H(c.data):"tags"in c&&(c.query=I(c.tags),c.createSearchChoice===b&&(c.createSearchChoice=function(b){return{id:a.trim(b),text:a.trim(b)}}),c.initSelection===b&&(c.initSelection=function(b,d){var e=[];a(r(b.val(),c.separator)).each(function(){var b={id:this,text:this},d=c.tags;a.isFunction(d)&&(d=d()),a(d).each(function(){if(q(this.id,b.id))return b=this,!1}),e.push(b)}),d(e)})));if(typeof c.query!="function")throw"query function not defined for Select2 "+c.element.attr("id");return c},monitorSource:function(){var a=this.opts.element,c;a.on("change.select2",this.bind(function(a){this.opts.element.data("select2-change-triggered")!==!0&&this.initSelection()})),c=this.bind(function(){var c,d,e=this,f=a.prop("disabled");f===b&&(f=!1),this.enable(!f);var d=a.prop("readonly");d===b&&(d=!1),this.readonly(d),D(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.addClass(K(this.opts.containerCssClass)),D(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(K(this.opts.dropdownCssClass))}),a.on("propertychange.select2 DOMAttrModified.select2",c),this.mutationCallback===b&&(this.mutationCallback=function(a){a.forEach(c)}),typeof WebKitMutationObserver!="undefined"&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new WebKitMutationObserver(this.mutationCallback),this.propertyObserver.observe(a.get(0),{attributes:!0,subtree:!1}))},triggerSelect:function(b){var c=a.Event("select2-selecting",{val:this.id(b),object:b});return this.opts.element.trigger(c),!c.isDefaultPrevented()},triggerChange:function(b){b=b||{},b=a.extend({},b,{type:"change",val:this.val()}),this.opts.element.data("select2-change-triggered",!0),this.opts.element.trigger(b),this.opts.element.data("select2-change-triggered",!1),this.opts.element.click(),this.opts.blurOnChange&&this.opts.element.blur()},isInterfaceEnabled:function(){return this.enabledInterface===!0},enableInterface:function(){var a=this._enabled&&!this._readonly,b=!a;return a===this.enabledInterface?!1:(this.container.toggleClass("select2-container-disabled",b),this.close(),this.enabledInterface=a,!0)},enable:function(a){a===b&&(a=!0);if(this._enabled===a)return;this._enabled=a,this.opts.element.prop("disabled",!a),this.enableInterface()},disable:function(){this.enable(!1)},readonly:function(a){return a===b&&(a=!1
),this._readonly===a?!1:(this._readonly=a,this.opts.element.prop("readonly",a),this.enableInterface(),!0)},opened:function(){return this.container.hasClass("select2-dropdown-open")},positionDropdown:function(){var b=this.dropdown,c=this.container.offset(),d=this.container.outerHeight(!1),e=this.container.outerWidth(!1),f=b.outerHeight(!1),g=a(window).scrollLeft()+a(window).width(),h=a(window).scrollTop()+a(window).height(),i=c.top+d,j=c.left,l=i+f<=h,m=c.top-f>=this.body().scrollTop(),n=b.outerWidth(!1),o=j+n<=g,p=b.hasClass("select2-drop-above"),q,r,s,t;this.opts.dropdownAutoWidth?(t=a(".select2-results",b)[0],b.addClass("select2-drop-auto-width"),b.css("width",""),n=b.outerWidth(!1)+(t.scrollHeight===t.clientHeight?0:k.width),n>e?e=n:n=e,o=j+n<=g):this.container.removeClass("select2-drop-auto-width"),this.body().css("position")!=="static"&&(q=this.body().offset(),i-=q.top,j-=q.left),p?(r=!0,!m&&l&&(r=!1)):(r=!1,!l&&m&&(r=!0)),o||(j=c.left+e-n),r?(i=c.top-f,this.container.addClass("select2-drop-above"),b.addClass("select2-drop-above")):(this.container.removeClass("select2-drop-above"),b.removeClass("select2-drop-above")),s=a.extend({top:i,left:j,width:e},K(this.opts.dropdownCss)),b.css(s)},shouldOpen:function(){var b;return this.opened()?!1:this._enabled===!1||this._readonly===!0?!1:(b=a.Event("select2-opening"),this.opts.element.trigger(b),!b.isDefaultPrevented())},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")},open:function(){return this.shouldOpen()?(this.opening(),!0):!1},opening:function(){var b=this.containerId,c="scroll."+b,d="resize."+b,e="orientationchange."+b,f,g;this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),this.clearDropdownAlignmentPreference(),this.dropdown[0]!==this.body().children().last()[0]&&this.dropdown.detach().appendTo(this.body()),f=a("#select2-drop-mask"),f.length==0&&(f=a(document.createElement("div")),f.attr("id","select2-drop-mask").attr("class","select2-drop-mask"),f.hide(),f.appendTo(this.body()),f.on("mousedown touchstart click",function(b){var c=a("#select2-drop"),d;c.length>0&&(d=c.data("select2"),d.opts.selectOnBlur&&d.selectHighlighted({noFocus:!0}),d.close({focus:!1}),b.preventDefault(),b.stopPropagation())})),this.dropdown.prev()[0]!==f[0]&&this.dropdown.before(f),a("#select2-drop").removeAttr("id"),this.dropdown.attr("id","select2-drop"),f.show(),this.positionDropdown(),this.dropdown.show(),this.positionDropdown(),this.dropdown.addClass("select2-drop-active");var h=this;this.container.parents().add(window).each(function(){a(this).on(d+" "+c+" "+e,function(a){h.positionDropdown()})})},close:function(){if(!this.opened())return;var b=this.containerId,c="scroll."+b,d="resize."+b,e="orientationchange."+b;this.container.parents().add(window).each(function(){a(this).off(c).off(d).off(e)}),this.clearDropdownAlignmentPreference(),a("#select2-drop-mask").hide(),this.dropdown.removeAttr("id"),this.dropdown.hide(),this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active"),this.results.empty(),this.clearSearch(),this.search.removeClass("select2-active"),this.opts.element.trigger(a.Event("select2-close"))},externalSearch:function(a){this.open(),this.search.val(a),this.updateResults(!1)},clearSearch:function(){},getMaximumSelectionSize:function(){return K(this.opts.maximumSelectionSize)},ensureHighlightVisible:function(){var b=this.results,c,d,e,f,g,h,i;d=this.highlight();if(d<0)return;if(d==0){b.scrollTop(0);return}c=this.findHighlightableChoices().find(".select2-result-label"),e=a(c[d]),f=e.offset().top+e.outerHeight(!0),d===c.length-1&&(i=b.find("li.select2-more-results"),i.length>0&&(f=i.offset().top+i.outerHeight(!0))),g=b.offset().top+b.outerHeight(!0),f>g&&b.scrollTop(b.scrollTop()+(f-g)),h=e.offset().top-b.offset().top,h<0&&e.css("display")!="none"&&b.scrollTop(b.scrollTop()+h)},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-disabled)")},moveHighlight:function(b){var c=this.findHighlightableChoices(),d=this.highlight();while(d>-1&&d<c.length){d+=b;var e=a(c[d]);if(e.hasClass("select2-result-selectable")&&!e.hasClass("select2-disabled")&&!e.hasClass("select2-selected")){this.highlight(d);break}}},highlight:function(b){var c=this.findHighlightableChoices(),d,e;if(arguments.length===0)return o(c.filter(".select2-highlighted")[0],c.get());b>=c.length&&(b=c.length-1),b<0&&(b=0),this.removeHighlight(),d=a(c[b]),d.addClass("select2-highlighted"),this.ensureHighlightVisible(),e=d.data("select2-data"),e&&this.opts.element.trigger({type:"select2-highlight",val:this.id(e),choice:e})},removeHighlight:function(){this.results.find(".select2-highlighted").removeClass("select2-highlighted")},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(b){var c=a(b.target).closest(".select2-result-selectable");if(c.length>0&&!c.is(".select2-highlighted")){var d=this.findHighlightableChoices();this.highlight(d.index(c))}else c.length==0&&this.removeHighlight()},loadMoreIfNeeded:function(){var a=this.results,b=a.find("li.select2-more-results"),c,d=-1,e=this.resultsPage+1,f=this,g=this.search.val(),h=this.context;if(b.length===0)return;c=b.offset().top-a.offset().top-a.height(),c<=this.opts.loadMorePadding&&(b.addClass("select2-active"),this.opts.query({element:this.opts.element,term:g,page:e,context:h,matcher:this.opts.matcher,callback:this.bind(function(c){if(!f.opened())return;f.opts.populateResults.call(this,a,c.results,{term:g,page:e,context:h}),f.postprocessResults(c,!1,!1),c.more===!0?(b.detach().appendTo(a).text(f.opts.formatLoadMore(e+1)),window.setTimeout(function(){f.loadMoreIfNeeded()},10)):b.remove(),f.positionDropdown(),f.resultsPage=e,f.context=c.context,this.opts.element.trigger({type:"select2-loaded",items:c})})}))},tokenize:function(){},updateResults:function(c){function m(){d.removeClass("select2-active"),h.positionDropdown()}function n(a){e.html(a),m()}var d=this.search,e=this.results,f=this.opts,g,h=this,i,j=d.val(),k=a.data(this.container,"select2-last-term"),l;if(c!==!0&&k&&q(j,k))return;a.data(this.container,"select2-last-term",j);if(c!==!0&&(this.showSearchInput===!1||!this.opened()))return;l=++this.queryCount;var o=this.getMaximumSelectionSize();if(o>=1){g=this.data();if(a.isArray(g)&&g.length>=o&&J(f.formatSelectionTooBig,"formatSelectionTooBig")){n("<li class='select2-selection-limit'>"+f.formatSelectionTooBig(o)+"</li>");return}}if(d.val().length<f.minimumInputLength){J(f.formatInputTooShort,"formatInputTooShort")?n("<li class='select2-no-results'>"+f.formatInputTooShort(d.val(),f.minimumInputLength)+"</li>"):n(""),c&&this.showSearch&&this.showSearch(!0);return}if(f.maximumInputLength&&d.val().length>f.maximumInputLength){J(f.formatInputTooLong,"formatInputTooLong")?n("<li class='select2-no-results'>"+f.formatInputTooLong(d.val(),f.maximumInputLength)+"</li>"):n("");return}f.formatSearching&&this.findHighlightableChoices().length===0&&n("<li class='select2-searching'>"+f.formatSearching()+"</li>"),d.addClass("select2-active"),this.removeHighlight(),i=this.tokenize(),i!=b&&i!=null&&d.val(i),this.resultsPage=1,f.query({element:f.element,term:d.val(),page:this.resultsPage,context:null,matcher:f.matcher,callback:this.bind(function(g){var i;if(l!=this.queryCount)return;if(!this.opened()){this.search.removeClass("select2-active");return}this.context=g.context===b?null:g.context,this.opts.createSearchChoice&&d.val()!==""&&(i=this.opts.createSearchChoice.call(h,d.val(),g.results),i!==b&&i!==null&&h.id(i)!==b&&h.id(i)!==null&&a(g.results).filter(function(){return q(h.id(this),h.id(i))}).length===0&&g.results.unshift(i));if(g.results.length===0&&J(f.formatNoMatches,"formatNoMatches")){n("<li class='select2-no-results'>"+f.formatNoMatches(d.val())+"</li>");return}e.empty(),h.opts.populateResults.call(this,e,g.results,{term:d.val(),page:this.resultsPage,context:null}),g.more===!0&&J(f.formatLoadMore,"formatLoadMore")&&(e.append("<li class='select2-more-results'>"+h.opts.escapeMarkup(f.formatLoadMore(this.resultsPage))+"</li>"),window.setTimeout(function(){h.loadMoreIfNeeded()},10)),this.postprocessResults(g,c),m(),this.opts.element.trigger({type:"select2-loaded",items:g})})})},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0}),this.close(),this.container.removeClass("select2-container-active"),this.search[0]===document.activeElement&&this.search.blur(),this.clearSearch(),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){y(this.search)},selectHighlighted:function(a){var b=this.highlight(),c=this.results.find(".select2-highlighted"),d=c.closest(".select2-result").data("select2-data");d?(this.highlight(b),this.onSelect(d,a)):a&&a.noFocus&&this.close()},getPlaceholder:function(){var a;return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder||((a=this.getPlaceholderOption())!==b?a.text():b)},getPlaceholderOption:function(){if(this.select){var a=this.select.children().first();if(this.opts.placeholderOption!==b)return this.opts.placeholderOption==="first"&&a||typeof this.opts.placeholderOption=="function"&&this.opts.placeholderOption(this.select);if(a.text()===""&&a.val()==="")return a}},initContainerWidth:function(){function c(){var c,d,e,f,g;if(this.opts.width==="off")return null;if(this.opts.width==="element")return this.opts.element.outerWidth(!1)===0?"auto":this.opts.element.outerWidth(!1)+"px";if(this.opts.width==="copy"||this.opts.width==="resolve"){c=this.opts.element.attr("style");if(c!==b){d=c.split(";");for(f=0,g=d.length;f<g;f+=1){e=d[f].replace(/\s/g,"").match(/[^-]width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i);if(e!==null&&e.length>=1)return e[1]}}return this.opts.width==="resolve"?(c=this.opts.element.css("width"),c.indexOf("%")>0?c:this.opts.element.outerWidth(!1)===0?"auto":this.opts.element.outerWidth(!1)+"px"):null}return a.isFunction(this.opts.width)?this.opts.width():this.opts.width}var d=c.call(this);d!==null&&this.container.css("width",d)}}),e=N(d,{createContainer:function(){var b=a(document.createElement("div")).attr({"class":"select2-container"}).html(["<a href='javascript:void(0)' onclick='return false;' class='select2-choice' tabindex='-1'>","   <span class='select2-chosen'>&nbsp;</span><abbr class='select2-search-choice-close'></abbr>","   <span class='select2-arrow'><b></b></span>","</a>","<input class='select2-focusser select2-offscreen' type='text'/>","<div class='select2-drop select2-display-none'>","   <div class='select2-search'>","       <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'/>","   </div>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return b},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.focusser.prop("disabled",!this.isInterfaceEnabled())},opening:function(){var c,d,e;this.opts.minimumResultsForSearch>=0&&this.showSearch(!0),this.parent.opening.apply(this,arguments),this.showSearchInput!==!1&&this.search.val(this.focusser.val()),this.search.focus(),c=this.search.get(0),c.createTextRange?(d=c.createTextRange(),d.collapse(!1),d.select()):c.setSelectionRange&&(e=this.search.val().length,c.setSelectionRange(e,e)),this.search.val()===""&&this.nextSearchTerm!=b&&(this.search.val(this.nextSearchTerm),this.search.select()),this.focusser.prop("disabled",!0).val(""),this.updateResults(!0),this.opts.element.trigger(a.Event("select2-open"))},close:function(a){if(!this.opened())return;this.parent.close.apply(this,arguments),a=a||{focus:!0},this.focusser.removeAttr("disabled"),a.focus&&this.focusser.focus()},focus:function(){this.opened()?this.close():(this.focusser.removeAttr("disabled"),this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments),this.focusser.removeAttr("disabled"),this.focusser.focus()},destroy:function(){a("label[for='"+this.focusser.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments)},initContainer:function(){var b,d=this.container,e=this.dropdown;this.opts.minimumResultsForSearch<0?this.showSearch(!1):this.showSearch(!0),this.selection=b=d.find(".select2-choice"),this.focusser=d.find(".select2-focusser"),this.focusser.attr("id","s2id_autogen"+g()),a("label[for='"+this.opts.element.attr("id")+"']").attr("for",this.focusser.attr("id")),this.focusser.attr("tabindex",this.elementTabIndex),this.search.on("keydown",this.bind(function(a){if(!this.isInterfaceEnabled())return;if(a.which===c.PAGE_UP||a.which===c.PAGE_DOWN){A(a);return}switch(a.which){case c.UP:case c.DOWN:this.moveHighlight(a.which===c.UP?-1:1),A(a);return;case c.ENTER:this.selectHighlighted(),A(a);return;case c.TAB:this.selectHighlighted({noFocus:!0});return;case c.ESC:this.cancel(a),A(a);return}})),this.search.on("blur",this.bind(function(a){document.activeElement===this.body().get(0)&&window.setTimeout(this.bind(function(){this.search.focus()}),0)})),this.focusser.on("keydown",this.bind(function(a){if(!this.isInterfaceEnabled())return;if(a.which===c.TAB||c.isControl(a)||c.isFunctionKey(a)||a.which===c.ESC)return;if(this.opts.openOnEnter===!1&&a.which===c.ENTER){A(a);return}if(a.which==c.DOWN||a.which==c.UP||a.which==c.ENTER&&this.opts.openOnEnter){if(a.altKey||a.ctrlKey||a.shiftKey||a.metaKey)return;this.open(),A(a);return}if(a.which==c.DELETE||a.which==c.BACKSPACE){this.opts.allowClear&&this.clear(),A(a);return}})),t(this.focusser),this.focusser.on("keyup-change input",this.bind(function(a){if(this.opts.minimumResultsForSearch>=0){a.stopPropagation();if(this.opened())return;this.open()}})),b.on("mousedown","abbr",this.bind(function(a){if(!this.isInterfaceEnabled())return;this.clear(),B(a),this.close(),this.selection.focus()})),b.on("mousedown",this.bind(function(b){this.container.hasClass("select2-container-active")||this.opts.element.trigger(a.Event("select2-focus")),this.opened()?this.close():this.isInterfaceEnabled()&&this.open(),A(b)})),e.on("mousedown",this.bind(function(){this.search.focus()})),b.on("focus",this.bind(function(a){A(a)})),this.focusser.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(a.Event("select2-focus")),this.container.addClass("select2-container-active")})).on("blur",this.bind(function(){this.opened()||(this.container.removeClass("select2-container-active"),this.opts.element.trigger(a.Event("select2-blur")))})),this.search.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(a.Event("select2-focus")),this.container.addClass("select2-container-active")})),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.setPlaceholder()},clear:function(b){var c=this.selection.data("select2-data");if(c){var d=a.Event("select2-clearing");this.opts.element.trigger(d);if(d.isDefaultPrevented())return;var e=this.getPlaceholderOption();this.opts.element.val(e?e.val():""),this.selection.find(".select2-chosen").empty(),this.selection.removeData("select2-data"),this.setPlaceholder(),b!==!1&&(this.opts.element.trigger({type:"select2-removed",val:this.id(c),choice:c}),this.triggerChange({removed:c}))}},initSelection:function(){var a;if(this.isPlaceholderOptionSelected())this.updateSelection(null),this.close(),this.setPlaceholder();else{var c=this;this.opts.initSelection.call(null,this.opts.element,function(a){a!==b&&a!==null&&(c.updateSelection(a),c.close(),c.setPlaceholder())})}},isPlaceholderOptionSelected:function(){var a;return this.getPlaceholder()?(a=this.getPlaceholderOption())!==b&&a.is(":selected")||this.opts.element.val()===""||this.opts.element.val()===b||this.opts.element.val()===null:!1},prepareOpts:function(){var b=this.parent.prepareOpts.apply(this,arguments),c=this;return b.element.get(0).tagName.toLowerCase()==="select"?b.initSelection=function(a,b){var d=a.find(":selected");b(c.optionToData(d))}:"data"in b&&(b.initSelection=b.initSelection||function(c,d){var e=c.val(),f=null;b.query({matcher:function(a,c,d){var g=q(e,b.id(d));return g&&(f=d),g},callback:a.isFunction(d)?function(){d(f)}:a.noop})}),b},getPlaceholder:function(){return this.select&&this.getPlaceholderOption()===b?b:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var a=this.getPlaceholder();if(this.isPlaceholderOptionSelected()&&a!==b){if(this.select&&this.getPlaceholderOption()===b)return;this.selection.find(".select2-chosen").html(this.opts.escapeMarkup(a)),this.selection.addClass("select2-default"),this.container.removeClass("select2-allowclear")}},postprocessResults:function(a,b,c){var d=0,e=this,f=!0;this.findHighlightableChoices().each2(function(a,b){if(q(e.id(b.data("select2-data")),e.opts.element.val()))return d=a,!1}),c!==!1&&(b===!0&&d>=0?this.highlight(d):this.highlight(0));if(b===!0){var g=this.opts.minimumResultsForSearch;g>=0&&this.showSearch(L(a.results)>=g)}},showSearch:function(b){if(this.showSearchInput===b)return;this.showSearchInput=b,this.dropdown.find(".select2-search").toggleClass("select2-search-hidden",!b),this.dropdown.find(".select2-search").toggleClass("select2-offscreen",!b),a(this.dropdown,this.container).toggleClass("select2-with-searchbox",b)},onSelect:function(a,b){if(!this.triggerSelect(a))return;var c=this.opts.element.val(),d=this.data();this.opts.element.val(this.id(a)),this.updateSelection(a),this.opts.element.trigger({type:"select2-selected",val:this.id(a),choice:a}),this.nextSearchTerm=this.opts.nextSearchTerm(a,this.search.val()),this.close(),(!b||!b.noFocus)&&this.focusser.focus(),q(c,this.id(a))||this.triggerChange({added:a,removed:d})},updateSelection:function(a){var c=this.selection.find(".select2-chosen"),d,e;this.selection.data("select2-data",a),c.empty(),a!==null&&(d=this.opts.formatSelection(a,c,this.opts.escapeMarkup)),d!==b&&c.append(d),e=this.opts.formatSelectionCssClass(a,c),e!==b&&c.addClass(e),this.selection.removeClass("select2-default"),this.opts.allowClear&&this.getPlaceholder()!==b&&this.container.addClass("select2-allowclear")},val:function(){var a,c=!1,d=null,e=this,f=this.data();if(arguments.length===0)return this.opts.element.val();a=arguments[0],arguments.length>1&&(c=arguments[1]);if(this.select)this.select.val(a).find(":selected").each2(function(a,b){return d=e.optionToData(b),!1}),this.updateSelection(d),this.setPlaceholder(),c&&this.triggerChange({added:d,removed:f});else{if(!a&&a!==0){this.clear(c);return}if(this.opts.initSelection===b)throw new Error("cannot call val() if initSelection() is not defined");this.opts.element.val(a),this.opts.initSelection(this.opts.element,function(a){e.opts.element.val(a?e.id(a):""),e.updateSelection(a),e.setPlaceholder(),c&&e.triggerChange({added:a,removed:f})})}},clearSearch:function(){this.search.val(""),this.focusser.val("")},data:function(a){var c,d=!1;if(arguments.length===0)return c=this.selection.data("select2-data"),c==b&&(c=null),c;arguments.length>1&&(d=arguments[1]),a?(c=this.data(),this.opts.element.val(a?this.id(a):""),this.updateSelection(a),d&&this.triggerChange({added:a,removed:c})):this.clear(d)}}),f=N(d,{createContainer:function(){var b=a(document.createElement("div")).attr({"class":"select2-container select2-container-multi"}).html(["<ul class='select2-choices'>","  <li class='select2-search-field'>","    <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi select2-display-none'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return b},prepareOpts:function(){var b=this.parent.prepareOpts.apply(this,arguments),c=this;return b.element.get(0).tagName.toLowerCase()==="select"?b.initSelection=function(a,b){var d=[];a.find(":selected").each2(function(a,b){d.push(c.optionToData(b))}),b(d)}:"data"in b&&(b.initSelection=b.initSelection||function(c,d){var e=r(c.val(),b.separator),f=[];b.query({matcher:function(c,d,g){var h=a.grep(e,function(a){return q(a,b.id(g))}).length;return h&&f.push(g),h},callback:a.isFunction(d)?function(){var a=[];for(var c=0;c<e.length;c++){var g=e[c];for(var h=0;h<f.length;h++){var i=f[h];if(q(g,b.id(i))){a.push(i),f.splice(h,1);break}}}d(a)}:a.noop})}),b},selectChoice:function(a){var b=this.container.find(".select2-search-choice-focus");if(!b.length||!a||a[0]!=b[0])b.length&&this.opts.element.trigger("choice-deselected",b),b.removeClass("select2-search-choice-focus"),a&&a.length&&(this.close(),a.addClass("select2-search-choice-focus"),this.opts.element.trigger("choice-selected",a))},destroy:function(){a("label[for='"+this.search.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments)},initContainer:function(){var b=".select2-choices",d;this.searchContainer=this.container.find(".select2-search-field"),this.selection=d=this.container.find(b);var e=this;this.selection.on("click",".select2-search-choice:not(.select2-locked)",function(b){e.search[0].focus(),e.selectChoice(a(this))}),this.search.attr("id","s2id_autogen"+g()),a("label[for='"+this.opts.element.attr("id")+"']").attr("for",this.search.attr("id")),this.search.on("input paste",this.bind(function(){if(!this.isInterfaceEnabled())return;this.opened()||this.open()})),this.search.attr("tabindex",this.elementTabIndex),this.keydowns=0,this.search.on("keydown",this.bind(function(a){if(!this.isInterfaceEnabled())return;++this.keydowns;var b=d.find(".select2-search-choice-focus"),e=b.prev(".select2-search-choice:not(.select2-locked)"),f=b.next(".select2-search-choice:not(.select2-locked)"),g=z(this.search);if(!(!b.length||a.which!=c.LEFT&&a.which!=c.RIGHT&&a.which!=c.BACKSPACE&&a.which!=c.DELETE&&a.which!=c.ENTER)){var h=b;a.which==c.LEFT&&e.length?h=e:a.which==c.RIGHT?h=f.length?f:null:a.which===c.BACKSPACE?(this.unselect(b.first()),this.search.width(10),h=e.length?e:f):a.which==c.DELETE?(this.unselect(b.first()),this.search.width(10),h=f.length?f:null):a.which==c.ENTER&&(h=null),this.selectChoice(h),A(a),(!h||!h.length)&&this.open();return}if((a.which===c.BACKSPACE&&this.keydowns==1||a.which==c.LEFT)&&g.offset==0&&!g.length){this.selectChoice(d.find(".select2-search-choice:not(.select2-locked)").last()),A(a);return}this.selectChoice(null);if(this.opened())switch(a.which){case c.UP:case c.DOWN:this.moveHighlight(a.which===c.UP?-1:1),A(a);return;case c.ENTER:this.selectHighlighted(),A(a);return;case c.TAB:this.selectHighlighted({noFocus:!0}),this.close();return;case c.ESC:this.cancel(a),A(a);return}if(a.which===c.TAB||c.isControl(a)||c.isFunctionKey(a)||a.which===c.BACKSPACE||a.which===c.ESC)return;if(a.which===c.ENTER){if(this.opts.openOnEnter===!1)return;if(a.altKey||a.ctrlKey||a.shiftKey||a.metaKey)return}this.open(),(a.which===c.PAGE_UP||a.which===c.PAGE_DOWN)&&A(a),a.which===c.ENTER&&A(a)})),this.search.on("keyup",this.bind(function(a){this.keydowns=0,this.resizeSearch()})),this.search.on("blur",this.bind(function(b){this.container.removeClass("select2-container-active"),this.search.removeClass("select2-focused"),this.selectChoice(null),this.opened()||this.clearSearch(),b.stopImmediatePropagation(),this.opts.element.trigger(a.Event("select2-blur"))})),this.container.on("click",b,this.bind(function(b){if(!this.isInterfaceEnabled())return;if(a(b.target).closest(".select2-search-choice").length>0)return;this.selectChoice(null),this.clearPlaceholder(),this.container.hasClass("select2-container-active")||this.opts.element.trigger(a.Event("select2-focus")),this.open(),this.focusSearch(),b.preventDefault()})),this.container.on("focus",b,this.bind(function(){if(!this.isInterfaceEnabled())return;this.container.hasClass("select2-container-active")||this.opts.element.trigger(a.Event("select2-focus")),this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder()})),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.clearSearch()},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.search.prop("disabled",!this.isInterfaceEnabled())},initSelection:function(){var a;this.opts.element.val()===""&&this.opts.element.text()===""&&(this.updateSelection([]),this.close(),this.clearSearch());if(this.select||this.opts.element.val()!==""){var c=this;this.opts.initSelection.call(null,this.opts.element,function(a){a!==b&&a!==null&&(c.updateSelection(a),c.close(),c.clearSearch())})}},clearSearch:function(){var a=this.getPlaceholder(),c=this.getMaxSearchWidth();a!==b&&this.getVal().length===0&&this.search.hasClass("select2-focused")===!1?(this.search.val(a).addClass("select2-default"),this.search.width(c>0?c:this.container.css("width"))):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.clearPlaceholder(),this.resizeSearch(),this.parent.opening.apply(this,arguments),this.focusSearch(),this.updateResults(!0),this.search.focus(),this.opts.element.trigger(a.Event("select2-open"))},close:function(){if(!this.opened())return;this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(b){var c=[],d=[],e=this;a(b).each(function(){o(e.id(this),c)<0&&(c.push(e.id(this)),d.push(this))}),b=d,this.selection.find(".select2-search-choice").remove(),a(b).each(function(){e.addSelectedChoice(this)}),e.postprocessResults()},tokenize:function(){var a=this.search.val();a=this.opts.tokenizer.call(this,a,this.data(),this.bind(this.onSelect),this.opts),a!=null&&a!=b&&(this.search.val(a),a.length>0&&this.open())},onSelect:function(a,b){if(!this.triggerSelect(a))return;this.addSelectedChoice(a),this.opts.element.trigger({type:"selected",val:this.id(a),choice:a}),(this.select||!this.opts.closeOnSelect)&&this.postprocessResults(a,!1,this.opts.closeOnSelect===!0),this.opts.closeOnSelect?(this.close(),this.search.width(10)):this.countSelectableResults()>0?(this.search.width(10),this.resizeSearch(),this.getMaximumSelectionSize()>0&&this.val().length>=this.getMaximumSelectionSize()&&this.updateResults(!0),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:a}),(!b||!b.noFocus)&&this.focusSearch()},cancel:function(){this.close(),this.focusSearch()},addSelectedChoice:function(c){var d=!c.locked,e=a("<li class='select2-search-choice'>    <div></div>    <a href='#' onclick='return false;' class='select2-search-choice-close' tabindex='-1'></a></li>"),f=a("<li class='select2-search-choice select2-locked'><div></div></li>"),g=d?e:f,h=this.id(c),i=this.getVal(),j,k;j=this.opts.formatSelection(c,g.find("div"),this.opts.escapeMarkup),j!=b&&g.find("div").replaceWith("<div>"+j+"</div>"),k=this.opts.formatSelectionCssClass(c,g.find("div")),k!=b&&g.addClass(k),d&&g.find(".select2-search-choice-close").on("mousedown",A).on("click dblclick",this.bind(function(b){if(!this.isInterfaceEnabled())return;a(b.target).closest(".select2-search-choice").fadeOut("fast",this.bind(function(){this.unselect(a(b.target)),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),this.close(),this.focusSearch()})).dequeue(),A(b)})).on("focus",this.bind(function(){if(!this.isInterfaceEnabled())return;this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active")})),g.data("select2-data",c),g.insertBefore(this.searchContainer),i.push(h),this.setVal(i)},unselect:function(a){var b=this.getVal(),c,d;a=a.closest(".select2-search-choice");if(a.length===0)throw"Invalid argument: "+a+". Must be .select2-search-choice";c=a.data("select2-data");if(!c)return;while((d=o(this.id(c),b))>=0)b.splice(d,1),this.setVal(b),this.select&&this.postprocessResults();a.remove(),this.opts.element.trigger({type:"removed",val:this.id(c),choice:c}),this.triggerChange({removed:c})},postprocessResults:function(a,b,c){var d=this.getVal(),e=this.results.find(".select2-result"),f=this.results.find(".select2-result-with-children"),g=this;e.each2(function(a,b){var c=g.id(b.data("select2-data"));o(c,d)>=0&&(b.addClass("select2-selected"),b.find(".select2-result-selectable").addClass("select2-selected"))}),f.each2(function(a,b){!b.is(".select2-result-selectable")&&b.find(".select2-result-selectable:not(.select2-selected)").length===0&&b.addClass("select2-selected")}),this.highlight()==-1&&c!==!1&&g.highlight(0),!this.opts.createSearchChoice&&!e.filter(".select2-result:not(.select2-selected)").length>0&&(!a||a&&!a.more&&this.results.find(".select2-no-results").length===0)&&J(g.opts.formatNoMatches,"formatNoMatches")&&this.results.append("<li class='select2-no-results'>"+g.opts.formatNoMatches(g.search.val())+"</li>")},getMaxSearchWidth:function(){return this.selection.width()-s(this.search)},resizeSearch:function(){var a,b,c,d,e,f=s(this.search);a=C(this.search)+10,b=this.search.offset().left,c=this.selection.width(),d=this.selection.offset().left,e=c-(b-d)-f,e<a&&(e=c-f),e<40&&(e=c-f),e<=0&&(e=a),this.search.width(Math.floor(e))},getVal:function(){var a;return this.select?(a=this.select.val(),a===null?[]:a):(a=this.opts.element.val(),r(a,this.opts.separator))},setVal:function(b){var c;this.select?this.select.val(b):(c=[],a(b).each(function(){o(this,c)<0&&c.push(this)}),this.opts.element.val(c.length===0?"":c.join(this.opts.separator)))},buildChangeDetails:function(a,b){var b=b.slice(0),a=a.slice(0);for(var c=0;c<b.length;c++)for(var d=0;d<a.length;d++)q(this.opts.id(b[c]),this.opts.id(a[d]))&&(b.splice(c,1),c--,a.splice(d,1),d--);return{added:b,removed:a}},val:function(c,d){var e,f=this,g;if(arguments.length===0)return this.getVal();e=this.data(),e.length||(e=[]);if(!c&&c!==0){this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),d&&this.triggerChange({added:this.data(),removed:e});return}this.setVal(c);if(this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),d&&this.triggerChange(this.buildChangeDetails(e,this.data()));else{if(this.opts.initSelection===b)throw new Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,function(b){var c=a.map(b,f.id);f.setVal(c),f.updateSelection(b),f.clearSearch(),d&&f.triggerChange(f.buildChangeDetails(e,this.data()))})}this.clearSearch()},onSortStart:function(){if(this.select)throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0),this.searchContainer.hide()},onSortEnd:function(){var b=[],c=this;this.searchContainer.show(),this.searchContainer.appendTo(this.searchContainer.parent()),this.resizeSearch(),this.selection.find(".select2-search-choice").each(function(){b.push(c.opts.id(a(this).data("select2-data")))}),this.setVal(b),this.triggerChange()},data:function(b,c){var d=this,e,f;if(arguments.length===0)return this.selection.find(".select2-search-choice").map(function(){return a(this).data("select2-data")}).get();f=this.data(),b||(b=[]),e=a.map(b,function(a){return d.opts.id(a)}),this.setVal(e),this.updateSelection(b),this.clearSearch(),c&&this.triggerChange(this.buildChangeDetails(f,this.data()))}}),a.fn.select2=function(){var c=Array.prototype.slice.call(arguments,0),d,g,h,i,j,k=["val","destroy","opened","open","close","focus","isFocused","container","dropdown","onSortStart","onSortEnd","enable","disable","readonly","positionDropdown","data","search"],l=["opened","isFocused","container","dropdown"],m=["val","data"],n={search:"externalSearch"};return this.each(function(){if(c.length===0||typeof c[0]=="object")d=c.length===0?{}:a.extend({},c[0]),d.element=a(this),d.element.get(0).tagName.toLowerCase()==="select"?j=d.element.prop("multiple"):(j=d.multiple||!1,"tags"in d&&(d.multiple=j=!0)),g=j?new f:new e,g.init(d);else{if(typeof c[0]!="string")throw"Invalid arguments to select2 plugin: "+c;if(o(c[0],k)<0)throw"Unknown method: "+c[0];i=b,g=a(this).data("select2");if(g===b)return;h=c[0],h==="container"?i=g.container:h==="dropdown"?i=g.dropdown:(n[h]&&(h=n[h]),i=g[h].apply(g,c.slice(1)));if(o(c[0],l)>=0||o(c[0],m)&&c.length==1)return!1}}),i===b?this:i},a.fn.select2.defaults={width:"copy",loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(a,b,c,d){var e=
[];return E(a.text,c.term,e,d),e.join("")},formatSelection:function(a,c,d){return a?d(a.text):b},sortResults:function(a,b,c){return a},formatResultCssClass:function(a){return b},formatSelectionCssClass:function(a,c){return b},formatNoMatches:function(){return"No matches found"},formatInputTooShort:function(a,b){var c=b-a.length;return"Please enter "+c+" more character"+(c==1?"":"s")},formatInputTooLong:function(a,b){var c=a.length-b;return"Please delete "+c+" character"+(c==1?"":"s")},formatSelectionTooBig:function(a){return"You can only select "+a+" item"+(a==1?"":"s")},formatLoadMore:function(a){return"Loading more results..."},formatSearching:function(){return"Searching..."},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(a){return a.id},matcher:function(a,b){return n(""+b).toUpperCase().indexOf(n(""+a).toUpperCase())>=0},separator:",",tokenSeparators:[],tokenizer:M,escapeMarkup:F,blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(a){return a},adaptDropdownCssClass:function(a){return null},nextSearchTerm:function(a,c){return b}},a.fn.select2.ajaxDefaults={transport:a.ajax,params:{type:"GET",cache:!1,dataType:"json"}},window.Select2={query:{ajax:G,local:H,tags:I},util:{debounce:v,markMatch:E,escapeMarkup:F,stripDiacritics:n},"class":{"abstract":d,single:e,multi:f}}}(jQuery),function(){var a;$(document).on("ready",function(){return a($(".carousel-item:first")),window.timer=window.setInterval(function(){var b;return b=$(".carousel-item.focus"),b.next().length>0?a(b.next()):a($(".carousel-item:first"))},7777)}),a=function(a){var b,c,d,e;return $(".carousel-item.focus").removeClass("focus",111),$(a).addClass("focus"),$(".carousel-focus-item img").attr("src",$(a).data("src")),$(".carousel-focus-item .tag-name").html("#"+$(a).data("name")),$(".carousel-focus-item a").attr("href","tags/"+$(a).data("name")),d=$(a).data("hunt_count")>999?"1k+":$(a).data("hunt_count"),b=$(a).data("find_count")>999?"1k+":$(a).data("find_count"),e=$(a).data("hunt_count")===1?"Hunt":"Hunts",c=$(a).data("find_count")===1?"Find":"Finds",$(".carousel-focus-item .hunt-stat").html(""+d+" "+e),$(".carousel-focus-item .find-stat").html(""+b+" "+c)}}.call(this),window.onload=function(){},window.onpopstate=function(a){var b=a.state;if(b!=undefined&&b["nextPage"]!=undefined){var c=$("#request-more").attr("href").split("?")[0]+"?page="+b.nextPage;$("#request-more").attr("href",c)}},function(){popups={},popups.instagramPopup=function(){popups.newPopup("/auth/instagram")},popups.tumblrPopup=function(a){a?popups.newPopup("/auth/tumblr?for-sharing=true&r=t",900,350):popups.newPopup("/auth/tumblr",900,350)},popups.fbSignup=function(){popups.fbPopup({r:"t",request_type:"signup"})},popups.fbPopup=function(a){var b="/auth/facebook?";for(var c in a)b+=c+"="+a[c]+"&";popups.newPopup(b,370,280)},popups.newPopup=function(a,b,c){_gaq.push(["_trackEvent","Sessions",a,current_user_descriptor(),0]);var d=window.screenX+256,e=window.screenY+250;b==undefined&&(b=800),c==undefined&&(c=600),window.open(a,"popUpWindow","height="+c+",width="+b+",left="+d+",top="+e+",resizable=yes,scrollbars=yes,toolbar=yes,menubar=no,location=no,directories=no,status=yes")}}(),$(document).on("ajax:success",".gem-button",function(a,b){var c=$(a.target).attr("slug");$(".facepile-"+c).replaceWith(b)}),function(a){a(document).ajaxSend(function(a,b,c){if(typeof c!="undefined"&&c!==null)if(c.url=="/hunts-metadata"||c.url=="/finds-metadata"||c.url=="/outbound"||c.url.match("/the-hunt/.*/similar_finds")||c.url=="/poll-crawler"||c.url=="/following-done"||c.url=="/sessions/sharing"||c.url.match("/related_tags/.*"))return;typeof _gaq!="undefined"&&_gaq!==null&&(_gaq.push(["_trackPageview",c.url]),is_signed_in()?_qevents.push({qacct:"p-64_z-86L4LwMw",uid:current_user_outbound_id()}):_qevents.push({qacct:"p-64_z-86L4LwMw"}))})}(jQuery),function(){sharedCollectionsBehavior={},sharedCollectionsBehavior.requestCollectionMetadata=function(a,b,c,d){if(!is_signed_in())return;slugs=$(a).find(b).map(function(a,b){return $(b).attr("data-slug")}),$.ajax({url:c,type:"POST",data:{slugs:slugs.toArray(),show_reasons:followingFeed.isViewingFeed()},dataType:"JSON",success:d})},sharedCollectionsBehavior.refreshCollectionModules=function(a,b,c,d,e){followingFeed.isViewingFeed()&&$(".help-icon").show();for(collectionItem in a){var f=a[collectionItem].server_id;a[collectionItem][b]==1?c(f):d(f);var g=a[collectionItem].reason;g!=undefined&&e(f,g)}},zinesController={},zinesController.requestZineMetadata=function(){var a=$("#paginator").attr("data-page");a=a===undefined?".collection-container":"#zines_page_"+a,sharedCollectionsBehavior.requestCollectionMetadata(a,".zine-id","/hunts-metadata",zinesController.refreshZineModules)},zinesController.refreshZineModules=function(a){sharedCollectionsBehavior.refreshCollectionModules(a.zines,"liked",zinesController.showUnfollowButton,zinesController.showFollowButton,zinesController.showReason)},zinesController.showUnfollowButton=function(a){$("#unwatch-hunt_"+a).show(),$("#watch-hunt_"+a).hide()},zinesController.showFollowButton=function(a){$("#unwatch-hunt_"+a).hide(),$("#watch-hunt_"+a).show()},zinesController.showReason=function(a,b){$(".zine-id[data-slug='"+a+"']").parent().find(".help-text."+b+".hidden").removeClass("hidden")},notesController={},notesController.requestNoteMetadata=function(){var a=$("#paginator").attr("data-page");followingFeed.isViewingFeed()?a="#zines_page_"+a:a=a===undefined?".collection-container":"#notes_page_"+a,sharedCollectionsBehavior.requestCollectionMetadata(a,".note-id","/finds-metadata",notesController.refreshNoteModules)},notesController.refreshNoteModules=function(a){sharedCollectionsBehavior.refreshCollectionModules(a.notes,"liked",notesController.showGemmedButton,notesController.showGemItButton,notesController.showReason)},notesController.showGemmedButton=function(a){$("#remove_like_"+a).parent().show(),$("#new_like_"+a).parent().hide()},notesController.showGemItButton=function(a){$("#remove_like_"+a).parent().hide(),$("#new_like_"+a).parent().show()},notesController.showReason=function(a,b){$(".note-id[data-slug='"+a+"']").parent().find(".help-text."+b+".hidden").removeClass("hidden")}}(),$(document).on("click","#hunt-controls a",function(){_gaq.push(["_trackEvent","Hunts","Sort Order",current_user_descriptor()]);var a=$("#hunt-search input").val(),b=a==""?"":"&query="+a;$("#hunt-ordering").data("last_popular_collection_view_url",this.value)}),$(document).on("click","#hunt-search input",function(a){$(a.target).attr("placeholder","")}),$(document).on("click","#hunt-search .background-search",function(){PopularView.search()}),$(document).on("keydown","#hunt-search input",function(a){var b=a.keyCode?a.keyCode:a.which;b===13&&PopularView.search()}),$(document).ready(function(){FollowInterstitial.isLoaded()&&FollowInterstitial.initialize(),$(".inline-grey-loading-container.following-feed").length>0&&(followingFeed.pollingId=setInterval(followingFeed.pollFollowingFeed,500));if($(".feedback-buttons-container").length>0){$(".feedback-button-link").on("ajax:error",FeedbackModule.closeModule).on("ajax:success",FeedbackModule.closeModule),$(".feedback-note-perfect").on("ajax:beforeSend",a),$(".feedback-note-nicetry").on("ajax:beforeSend",b);function a(){FeedbackModule.disableModule(this,"Perfect")}function b(){FeedbackModule.disableModule(this,"Nice Try")}$(".feedback-button-container.nice_try").mouseenter(function(){$(this).find(".callout-container").fadeIn(100)}).mouseleave(function(){$(this).find(".callout-container").fadeOut(100)})}var c=$("#onboarding-modal-container");c.length>0&&($("#dim").show(),c.show()),c.hasClass("follow")&&($(".follow-zines-next").on("click",function(){$(".onboarding-modal-popover-container").hide(),$("#dim").hide()}),FollowModal.attachClickHandlers()),$("#hunt-search input").focus(),$("#header-button").length==0&&$("#new-zine-flow").length==0&&$("#start-hunt a").show(),bindSigninHover(),$("#new-hunts.disabled").length==0&&bindDropdownMenus(),$("#load-instagram-photos").on("ajax:success",loadInstagramPhotos),$(window).endlessScroll({fireOnce:!0,bottomPixels:1e3,fireDelay:500,loader:"",callback:function(){$("#request-more").click(),$("#request-more-top-finds").click(),$("#request-more-hunt-images").click(),$("#request-more-finds").click(),$("#request-more-instagram-images").click(),$("#request-more-instagram-like-images").click()}}),$("#note_external_image_url_input").on("blur",ZineView.displayCrawlerImages),$(".image-fetch-url .fetch").on("click",function(){ZineView.displayCrawlerImages({element:$("#note_external_image_url_input")[0]})}),$("#content .collection-container").click(function(){$("#full-sized-image").show()}),$("#product-image-container").click(function(){$("#full-sized-image").show()}),$("#user-personal .enlargeable-image").click(function(){$("#full-sized-image").show()}),$("#full-sized-image").click(function(){$("#full-sized-image").hide()}),attachNotesPaginator(),attachFeedbackForm(),attachCollectionMouseovers(),bodyContainsZines()&&zinesController.requestZineMetadata(),bodyContainsNotes()&&notesController.requestNoteMetadata(),$(".enlargeable-image").mouseover(function(){$(this).find("> .enlarge-mouseover").show()}).mouseout(function(){$(this).find("> .enlarge-mouseover").hide()})}),$(document).on("ajax:success","#request-more-top-finds",function(a,b,c,d){$("#paginator").remove(),$("#more").get(0)&&$("#more").append(b),attachCollectionMouseovers(),affiliateLinks()}),ZineView={showSelectPhoto:function(){$("#new-note-flow").show(),$("#new-note-go-back-btn").show(),$("#finds").hide(),$("#actions").hide(),$("#website_photo_current_view").attr("value")=="instagram_photo"?($("#image-preview").hide(),$("#instagram-photos").show()):$("#image-preview").show(),mixpanel.track("Find: Add Clicked")},showAddFind:function(){$("#loader").show("fade")},setInstagramRedirectURI:function(a){jQuery.get("/instagram-redirect/"+a+"/edit")},watchHunt:function(){slug=$(this).attr("id").slice(-6),$("#watch-hunt_"+slug).toggle(),element=$("#unwatch-hunt_"+slug).toggle(),_gaq.push(["_trackEvent","Hunts","Follow",current_user_descriptor(),element.is(":visible")?1:0])},showFollowers:function(a,b,c){$followingAvatars=$(c).parentsUntil(".user-zine").find(".following-avatars"),$followingAvatars.length===1?$followingAvatars.html(b):$("#following").html(b)},pageNotes:function(){$("#find-loader").show("fade"),$("#finds-paginator").hide()},showNotes:function(a,b){$("#find-loader").remove(),$("#finds-paginator").remove(),$("#finds").append(b),onNotesLoaded()},addInstagramFind:function(a,b){$("#new-find").show(),$("#new-find").html(b),$("#new-find").addClass("showing"),$("#new-find").removeClass("right-hidden"),$("#photo-selector").addClass("left-hidden"),$("#photo-selector").removeClass("showing"),$("#photo-selector").hide(),ZineView.onNoteFormLoaded(),window.scrollTo(0,100),elementLoaded(".instagram-image")},onNoteFormLoaded:function(){$("#new_note").on("ajax:error",ZineView.replaceNoteForm).on("ajax:beforeSend",ZineView.saveNoteForm).on("ajax:complete",function(){$("#note-form-loader").hide(),enableInput("#new_note :input")}).on("ajax:success",ZineView.noteSaved),$("#note_tag_ids").on("keyup",function(a){var b=$(a.target);!b.hasClass("with-tags")&&b.val().length>0&&a.which!=8?b.addClass("with-tags"):b.val().length==0&&a.which==8&&b.removeClass("with-tags")})},previewImageClicked:function(){$("#new-note-go-back-btn").show(),$("#finds").hide(),$("#dim").addClass("add-find-dim"),$("#new-note-flow-container").addClass("above-dim"),$("#dim").show(),$this=$(this),loadElement($this.attr("id")),slug=$("#slug").attr("data"),$.ajax({url:$this.attr("path"),data:"zine_slug="+slug,dataType:"html",success:function(a,b,c){ZineView.addInstagramFind(null,a),$this.trigger("ajax:success",[a,b,c])}}),mixpanel.track("Find: Image Chosen")},goBackBtn:function(){$("#new-note-go-back-btn").hide(),$("#photo-selector").show(),$("#new-find").addClass("right-hidden"),$("#new-find").removeClass("showing"),$("#photo-selector").addClass("showing"),$("#photo-selector").removeClass("left-hidden"),$("#dim").hide(),$("#dim").removeClass("add-find-dim"),$("#new-note-flow-container").removeClass("above-dim"),$("#new-find").delay(300).fadeOut("fast")},saveNoteForm:function(a,b,c,d){var e=$("#note_tag_ids").val().split(" ").length;_gaq.push(["_trackEvent","Finds","New Find Submitted",current_user_descriptor()]),mixpanel.track("New Find Submitted",{tags:e}),$("#new_note .validation-error").html(""),$("#new_note .form-error").html(""),$("#note-form-loader").show(),disableInput("#new_note :input")},replaceNoteForm:function(a,b,c,d){$("#new-find").html(b.responseText),ZineView.onNoteFormLoaded()},noteSaved:function(a,b,c,d){$("#new-note-flow").hide(),$("#dim").hide(),$("#dim").removeClass("add-find-dim"),$("#new-note-flow-container").removeClass("above-dim"),d.status===201&&d.getResponseHeader("JS-Redirect")==="1"&&d.getResponseHeader("Content-Type").toLowerCase().indexOf("text/html")>=0?window.location=d.getResponseHeader("Location"):ZineView.replaceNoteForm(a,b,c,d)},populateImages:function(a){$("#image-preview-loader").hide(),$("#image-preview").html(a),loc=window.location.href,$(".preview-image img").click(ZineView.previewImageClicked),$(".preview-image").length==1&&$(".preview-image img").click()},selectImage:function(){$(".preview-image").removeClass("highlight"),$(this).addClass("highlight")},postFeedback:function(a,b){$(this).hide("fade"),mixpanel.track("Hunt Page Feedback: "+$(this).find("select").val())},feedbackPosted:function(a,b){$("#"+a.target.id+"-feedback").html(b),attachCollectionMouseovers(),ZineView.updateLikeStatus(a.target)},flagZine:function(a,b){$("#flag").hide(),$("#flag-off").show()},displayCrawlerImages:function(){function f(a,d,e){e.status==200&&(c(a),clearInterval(b))}function g(){$("#image-preview-loader").html("A problem has occurred. Please try again."),clearInterval(b)}function h(){b=setInterval(i,1e3)}function i(){a--,$.ajax({url:"/poll-crawler?mod="+e,headers:{"Skip-Mixpanel-Middleware":!0},data:"url="+encodeURIComponent(d.value),dataType:"html",success:f,error:g}),a>15||!$("#image-preview-loader").is(":visible")?$("#image-preview-loader").html("<strong>"+(a-15)+"</strong> seconds..."):a>5?$("#image-preview-loader").html("Nothing good yet, crawling deeper. <strong>"+(a-5)+"</strong> seconds..."):a>-2?$("#image-preview-loader").html("Finishing up..."):($("#image-preview-loader").html("A problem has occurred. Please try again."),clearInterval(b))}var a=30,b,c=typeof arguments[0].callback=="function"?arguments[0].callback:ZineView.populateImages,d=typeof arguments[0].element=="object"?arguments[0].element:this,e=typeof arguments[0].itemsPerRow=="number"?arguments[0].itemsPerRow:3;$("#new-find").show();if($.trim(d.value).length>0){var j=d.id.split("_");j[0]=="note"?mixpanel.track("Find: URL Entered"):j[1]=="zine"&&mixpanel.track("Hunt: URL Entered");for(var k=1;k<99999;k++)window.clearInterval(k);$("#image-preview-loader").html("Fetching Images..."),$("#image-preview-loader").show(),$(".arrow-box").hide(),$("#image-preview").html(""),$.ajax({url:"/request-images?mod="+e,headers:{"Skip-Mixpanel-Middleware":!0},data:"url="+encodeURIComponent(d.value),dataType:"html",success:h})}},updateLikeStatus:function(a){likeStatusMarkup=$(".hidden.updated-like-status-"+a.id),likeStatusMarkup.length>0&&$(".likes-"+a.id).html(likeStatusMarkup.html())},refreshProcessedImages:function(){var a=$(".poll-note-image");if(a.length!=0){for(var b=0;b<a.length;b++){var c=$(a[b]);$.ajax({url:c.attr("image_stat_url"),context:c,dataType:"html",success:function(a){$(this).replaceWith(a)}})}a=null,setTimeout(ZineView.refreshProcessedImages,5e3)}},trackHuntSourceLink:function(){mixpanel.track("App Attribution Link",{logged_in:is_signed_in()})},finishAppLinkTest:function(){$.ajax({url:"/complete_app_link_test",type:"POST"})}},FilterBar={isMenuOpen:function(a){return!a.hasClass("hidden")},closeMenu:function(a){a.toggleClass("hidden");var b=a.parent();FilterBar.resetToggle(b),b.hasClass("hover")&&b.toggleClass("hover")},resetToggle:function(a){var b=a.find(".menu-toggle");b.removeClass(),a.hasClass("selected")||a.is(":hover")?b.addClass("menu-toggle background-arrow_drop_white"):b.addClass("menu-toggle background-arrow_drop_dark")}},TagPages={showResults:function(a,b,c){c.status==200?$("#item-collections").replaceWith(a):setTimeout(TagPages.pollForContent,500)},showEmptyState:function(){$(".previews").html($(".empty-state").html())},pollForContent:function(a,b){$("a.poll").attr("retries",parseInt($("a.poll").attr("retries"))+1),$("a.poll").attr("retries")<100?$.ajax({url:$("a.poll").attr("href"),dataType:"html",success:TagPages.showResults,error:TagPages.showEmptyState}):TagPages.showEmptyState()}},TypeFilterBar={initialize:function(){$(".checkbox.check-hunts").on("click",function(){$("#filter-bar .check-hunts").toggle(),TypeFilterBar.refreshTagsPage()}),$(".checkbox.check-finds").on("click",function(){$("#filter-bar .check-finds").toggle(),TypeFilterBar.refreshTagsPage()})},refreshTagsPage:function(){$("#request-more").remove(),$(".previews .collection-container").remove(),base_url=$("#filter-bar #next_data").attr("data-next-url");if($(".hunts.load").is(":visible")&&$(".finds.load").is(":visible"))url=$("#filter-bar-both").clone();else if($(".check-hunts.load").is(":visible"))url=$("#filter-bar-hunts").clone();else{if(!$(".check-finds.load").is(":visible")){$("#paginator .loader").remove();return}url=$("#filter-bar-finds").clone()}url=url.attr("id","request-more").attr("data-remote","true"),$("#paginator").append(url),$("#paginator").append(jQuery("<div>").attr("class","loader")),$("#request-more").click()}},Navigation={showUserMenu:function(){$("#navigation .last").addClass("active"),$(".hover-menu").show()},hideUserMenu:function(){$("#navigation .last").removeClass("active"),$(".hover-menu").hide()},highlightNav:function(){var a=window.location.href;a.endsWith("/the-hunt/new")?$("#start-hunt a").addClass("active"):a.indexOf("/users/")!=-1?$("#user-link a").addClass("active"):a.endsWith("/showcase")?$("#showcase a").addClass("active"):$("#hunts-link a").addClass("active")},toggleNewHuntsMenu:function(){$("#new-hunts .menu").toggleClass("hidden")},onMenuToggle:function(a){a.hasClass("background-arrow_drop_white")?(a.removeClass("background-arrow_drop_white"),a.addClass("background-arrow_up_white")):a.hasClass("background-arrow_drop_dark")?(a.removeClass("background-arrow_drop_dark"),a.addClass("background-arrow_up_dark")):a.hasClass("background-arrow_up_white")?(a.removeClass("background-arrow_up_white"),a.addClass("background-arrow_drop_white")):(a.removeClass("background-arrow_up_dark"),a.addClass("background-arrow_drop_dark"))},onMenuHoverIn:function(a){if(a.hasClass("selected")||!a.find(".menu").hasClass("hidden"))return;a.toggleClass("hover");var b=a.find(".menu-toggle");b.hasClass("background-arrow_drop_dark")?(b.removeClass("background-arrow_drop_dark"),b.addClass("background-arrow_drop_white")):b.hasClass("background-arrow_up_dark")&&(b.removeClass("background-arrow_up_dark"),b.addClass("background-arrow_up_white"))},onMenuHoverOut:function(a){if(a.hasClass("selected")||!a.find(".menu").hasClass("hidden"))return;a.toggleClass("hover");var b=a.find(".menu-toggle");b.hasClass("background-arrow_drop_white")?(b.removeClass("background-arrow_drop_white"),b.addClass("background-arrow_drop_dark")):b.hasClass("background-arrow_up_white")&&(b.removeClass("background-arrow_up_white"),b.addClass("background-arrow_up_dark"))}},PopularView={search:function(){var a,b=$("#hunt-search input");b.val()==0?a=$("#hunt-ordering").data("last_popular_collection_view_url"):a=b.data("filtered-path"),$.pjax({url:a,data:"query="+encodeURIComponent(b.val()),dataType:"html",success:onSearchCompleted,container:"#content-container",timeout:2e3})}},Users={showHoverCard:function(a,b){$(".hovercard").hide();var c=$(a.target),d=".hovercard.hover-"+c.attr("slug")+":first",e=$(d),f=e.find(".user-image .avatar-metadata");if(f.length>0){var g=e.find(".user-image .avatar-placeholder");g.html("<img src='"+f.attr("data-url")+"' height='"+f.attr("height")+"' width='"+f.attr("width")+"'>"),f.remove(),g.show()}e.show().delay(200);var h=c.offset();h.top-=215,h.left-=162,h.left<0&&(h.left=0),e.offset(h)},hideHoverCard:function(a,b){var c=$(a.target);if(c.hasClass("hovercardable")&&a.pageY>c.offset().top){var d=".hovercard.hover-"+c.attr("slug")+":first";$(d).hide()}else c.hasClass("hovercardable")||(c.hasClass("hovercard")?c.hide():c.parents(".hovercard").hide())}},FirstTimeUI={showDim:function(){$("#dim").addClass("ftui-dim"),$("#dim").show(),$("#dim_clear").show()},hideDim:function(){$("#dim").hide(),$("#dim").removeClass("ftui-dim"),$("#dim_clear").hide()},hideDescriptions:function(){$(".hunt-ftui-container").hide()},hideInfo:function(a){a.removeClass("hunt-ftui")},hideControls:function(){$(".hunt-ftui-header-container").hide()},showUI:function(a,b){FirstTimeUI.showDim(),$(".hunt-ftui-header-container").show(),a.find(".hunt-ftui-container").show(),b.addClass("hunt-ftui")},updateControls:function(a,b){$(".hunt-ftui-header-step").html(a),$(".hunt-ftui-link").hide(),$(".hunt-ftui-link."+b).show()}},FeedbackModule={numNeedsFeedback:function(){return $("#feedback-modules").find(".collection-container").not(".removed").size()},closeFeedbackContainer:function(){$("#feedback-header").hide(),$("#feedback-modules").hide(),$("#feedback-controls").hide(),$("#feedback-text").show(),$(".feedback-dim").hide(),$("#feedback-container").animate({height:336}),filterBarTop=filterBarElement.offset().top},refreshModuleContainer:function(){$("#feedback-modules").find(".removed").addClass("done"),FeedbackModule.numNeedsFeedback()>0?$("#feedback-header").html($("#feedback_module_only_n").html()+FeedbackModule.numNeedsFeedback()+$("#feedback_module_n_left").html()):setTimeout(function(){FeedbackModule.closeFeedbackContainer()},1e3)},disableModule:function(a,b){$(a).addClass("clicked"),button_container=$(a).parent().parent(),buttons_container=button_container.parent(),buttons_container.find(".feedback-button-container.nice_try").unbind("mouseenter"),button_container.unbind("mouseleave"),button_container.find(".callout-container.perfect").fadeIn(100),_gaq.push(["_trackEvent","Feedback Module",b]),mixpanel.track("Feedback Module: "+b),""},closeModule:function(){item_container=$(this).parents(".collection-container"),item_container.addClass("removed"),item_container.find(".callout-container.nicetry").delay(1600).fadeOut(100),item_container.delay(2e3).animate({marginLeft:-235},1e3),setTimeout(function(){FeedbackModule.refreshModuleContainer()},3e3)}},FollowInterstitial={isLoaded:function(){return $("#onboarding-header.interstitial").length>0},initialize:function(){$("#app-header").remove(),$("#container").css("margin-top","0px"),FollowInterstitial.attachClickHandlers(),$(".follow-zines-next").on("click",function(){FollowInterstitial.completeFlow()}),FollowInterstitial.numHuntsFollowed()>0&&FollowInterstitial.updateMessageText()},onPageLoaded:function(){FollowInterstitial.attachClickHandlers()},attachClickHandlers:function(){$(".collection-details .hovercardable").unbind("mouseenter").mouseenter(function(){return!1}),$(".collection-image a").unbind("click").click(function(){return!1}),$(".collection-details a").unbind("click").click(function(){return!1}),$(".new_star_preview").unbind().click(function(){FollowInterstitial.onFollow(this)}),$(".remove_star_preview").unbind().click(function(){FollowInterstitial.onUnfollow(this)})},onFollow:function(a){var b=$(a).parents(".collection-container"),c=b.find(".zine-id").data("slug"),d=$(".progress-bar.interstitial .zine-thumbnail .empty-thumb").first().parent(),e=b.find(".zine-thumbnail").data("thumbnail_url"),f="<img src='"+e+"'>";d.attr("data-slug",c),d.html(f),d.addClass("filled"),FollowModal.incrAttr(".progress-bar.interstitial","followed"),FollowInterstitial.updateMessageText()},onUnfollow:function(a){var b=$(a).parents(".collection-container"),c=b.find(".zine-id").data("slug");if($('.progress-bar.interstitial .zine-thumbnail[data-slug="'+c+'"]').length>0){FollowModal.decrAttr(".progress-bar.interstitial","followed");var d=FollowInterstitial.getPreviewPosition(c);FollowInterstitial.shiftPreviewsLeft(d),FollowInterstitial.adjustPlaceholderNumbers(d),FollowInterstitial.updateMessageText()}},shiftPreviewsLeft:function(a){$(".progress-bar.interstitial .zine-thumbnail").eq(a).remove(),$("#zine-thumbnails").append($("#empty-thumbnail-template").html())},adjustPlaceholderNumbers:function(a){var b=$(".progress-bar.interstitial .zine-thumbnail .empty-thumb:visible");for(var c=0;c<b.length-1;c++){var d=$(b[c]),e=parseInt(d.html());d.html(e+1)}},getPreviewPosition:function(a){var b=$(".progress-bar.interstitial .zine-thumbnail");for(var c=0;c<b.length;c++)if($(b[c]).data("slug")==a)return c;return 4},numHuntsFollowed:function(){return parseInt($(".progress-bar.interstitial").attr("followed"))},updateMessageText:function(){FollowInterstitial.numHuntsFollowed()<5?$("#control-text").html("Follow "+(5-FollowInterstitial.numHuntsFollowed())+" more!"):$("#control-text").html($("#progress_meter_done").html()),FollowInterstitial.numHuntsFollowed()>2?$(".follow-zines-next").show():$(".follow-zines-next").hide()},completeFlow:function(){$.ajax({url:"/popular_collections/complete_onboarding",type:"POST",success:function(){window.location="/recent"}})}},FollowModal={attachClickHandlers:function(){$(".onboarding-modal-popover-container.follow #modules-container .collection-container").unbind().mouseover(function(){$(this).find("> .mod-overlay").show()}).mouseout(function(){$(this).find("> .mod-overlay").hide()}),$(".onboarding-modal-popover-container.follow #modules-container .new_star_preview").unbind().on("ajax:error",FollowModal.closeModule).on("ajax:success",FollowModal.closeModule)},numHuntsFollowed:function(){return parseInt($(".onboarding-modal-popover-container.follow .followed").attr("followed"))},numHuntModules:function(){return $(".onboarding-modal-popover-container.follow .collection-container.zine").not(".removed").size()},updateMessageText:function(){FollowModal.numHuntsFollowed()<5?$("#control-text").html("Follow "+(5-FollowModal.numHuntsFollowed())+" more!"):$("#control-text").html($("#progress_meter_done").html()),FollowModal.numHuntsFollowed()>2&&$(".follow-zines-next").show()},closeModule:function(){$(this).hide(1e3),item_container=$(this).parents(".collection-container"),item_container.unbind(),item_container.addClass("removed"),item_container.find(".mod-overlay").removeClass("hidden").show(),FollowModal.incrAttr(".onboarding-modal-popover-container.follow .followed","followed");var a=item_container.find(".zine-thumbnail").data("thumbnail_url"),b="<img src='"+a+"'>'";$(".onboarding-modal-popover-container.follow .zine-thumbnail .empty-thumb").first().parent().html(b),FollowModal.updateMessageText(),item_container.hide(),FollowModal.numHuntModules()<=3&&FollowModal.fetchMore(),mixpanel.track("Signup Hunt Follower "+FollowModal.numHuntsFollowed())},showMore:function(){$("#modules-container .collection-container.zine").not(".removed").slice(0,3).addClass("removed").hide(),FollowModal.fetchMore()},incrAttr:function(a,b){$(a).attr(b,1+parseInt($(a).attr(b)))},decrAttr:function(a,b){$(a).attr(b,parseInt($(a).attr(b))-1)},fetchMore:function(){page=$(".onboarding-modal-popover-container.follow .nextpage").attr("page"),$.ajax({url:$(".onboarding-modal-popover-container.follow .nextpage").attr("url")+"?page="+page,success:function(a){FollowModal.incrAttr(".onboarding-modal-popover-container.follow .nextpage","page"),$("#modules-container").append(a),FollowModal.attachClickHandlers(),FollowModal.numHuntModules()<=0&&$(".follow-zines-next").show()}})}},SharingButtons={setupMenu:function(){$(document).on("click","a.share-button",function(a){$(".share-menu-container").hide(),selected=$(this).hasClass("selected"),$("a.share-button").removeClass("selected"),selected?($(this).parents(".sharing-buttons-container").find(".share-menu-container").hide(),$(this).removeClass("selected")):($(this).parents(".sharing-buttons-container").find(".share-menu-container").show(),$(this).addClass("selected")),a.stopPropagation()}),$(document).on("click","html",function(){$(".share-menu-container:visible").length>0&&($(".share-menu-container").hide(),$("a.share-button").removeClass("selected"))}),$(document).on("click",".share-menu-container",function(a){a.stopPropagation()})}},$(document).on("ready",function(){SharingButtons.setupMenu()}),jQuery.extend({put:function(a,b,c,d){return _ajax_request(a,b,c,d,"PUT")},delete_:function(a,b,c,d){return _ajax_request(a,b,c,d,"DELETE")}}),$(document).on("pjax:success","#finds",function(a,b,c,d){onNotesLoaded()}),$(document).on("click","#new-note-go-back-btn",ZineView.goBackBtn),$(document).on("click",".preview-image",ZineView.selectImage),$(document).on("click","#flag a",ZineView.flagZine),$(document).on("click","#date-and-source .source a.ios-link",ZineView.trackHuntSourceLink),$(document).on("ajax:beforeSend",".new_comment",function(a,b){comment_text=$(this).parent().find(".new_comment_content").val(),$(this).parent().find(".new_comment_content").val("");if(comment_text==undefined||comment_text=="")return!1;$(".empty-comment .post-info").html(comment_text),$(this).parent().find(".next-comment").before($(".empty-comment").html())}),$(document).on("click",".st-button.unfound",function(a,b){$(a.target).hide(),$(".feedback .found-suffix").hide()}),$(document).on("ajax:success","#request-more",function(a,b,c,d){var e=$("#hunt-controls .selected").attr("sort"),f=$("#new-hunts .menu-name").text();$("#hunt-controls").get(0)&&_gaq.push(["_trackEvent","Usage","Homepage: Pagination","Sort: "+e+", Type: "+f]),$("#paginator").remove(),$("#more").get(0)?$("#more").append(b):$("#hunts").get(0)&&$("#hunts").append(b),onZinesLoaded(),affiliateLinks()}),$(document).on("click",".previews a#request-more",function(){var a=$("#request-more").attr("href").split("?")[1].split("&"),b=1,c=0;for(var d=0;d<a.length;d++){var e=a[d].split("=");e[0]=="page"&&(b=e[1],c=d)}a.splice(c,1);if(b>2){var f={nextPage:b-1},g="?page="+(b-2);a.length>0&&(g+="&"+a.join("&")),history.replaceState!==undefined&&history.replaceState(f,"",g)}}),$(document).on("click",".outbound a",function(){return $.ajax({url:"/outbound",data:"note-slug="+$(this).attr("data-slug"),type:"POST"}),!0}),$(document).on("click",".outbound-buy-button a",function(){return $.ajax({url:"/outbound",data:"buy-button=true&note-slug="+$(this).attr("data-slug"),type:"POST"}),!0}),$(document).on("ajax:success",".follow-user-button",function(a,b){$(a.target).parents(".fave-container").html(b)}),Utilities={buttonToggler:function(a,b,c){slug=a.attr("id").slice(-6),$("#create_"+c+"_"+slug).toggle(),element=$("#remove_"+c+"_"+slug).toggle(),_gaq.push(["_trackEvent",b,"Toggle",current_user_descriptor(),element.is(":visible")?1:0])}},$(document).on("ajax:beforeSend",".create_fave",function(){Utilities.buttonToggler($(this),"Friendship","fave")}),$(document).on("ajax:beforeSend",".remove_fave",function(){Utilities.buttonToggler($(this),"Friendship","fave")}),String.prototype.endsWith=function(a){return this.indexOf(a,this.length-a.length)!==-1},$(document).on("ajax:beforeSend",".new_star",ZineView.watchHunt),$(document).on("ajax:success",".new_star",function(a,b,c,d){ZineView.showFollowers(a,b,this),d.getResponseHeader("X-SignupFollower")&&(mixpanel.track("Signup Hunt Follower",{signup_date:d.getResponseHeader("X-SignupFollower")}),_gaq.push(["_setCustomVar",5,"Signup_Follower1",d.getResponseHeader("X-SignupFollower"),1]))}),$(document).on("ajax:beforeSend",".remove_star",ZineView.watchHunt),$(document).on("ajax:success",".remove_star",function(a,b){ZineView.showFollowers(a,b,this)}),$(document).on("ajax:beforeSend",".new_star_preview",ZineView.watchHunt),$(document).on("ajax:success",".new_star_preview",function(a,b,c,d){$(a.target).parents(".collection-container").find(".stats-row").replaceWith(b),d.getResponseHeader("X-SignupFollower")&&(mixpanel.track("Signup Hunt Follower",{signup_date:d.getResponseHeader("X-SignupFollower")}),_gaq.push(["_setCustomVar",5,"Signup_Follower1",d.getResponseHeader("X-SignupFollower"),1]))}),$(document).on("ajax:beforeSend",".remove_star_preview",ZineView.watchHunt),$(document).on("ajax:success",".remove_star_preview",function(a,b){$(a.target).parents(".collection-container").find(".stats-row").replaceWith(b)}),$(document).on("mouseenter",".hovercardable",Users.showHoverCard),$(document).on("mouseleave",".hovercard",Users.hideHoverCard),$(document).on("mouseleave",".hovercardable",Users.hideHoverCard),$(document).
on("click","#hide-me",function(){$("#footer").hide(),$("#show-me").show()}),$(document).on("click","#show-me",function(){$("#footer").show(),$("#show-me").hide()}),$(document).on("click","#signin-popup-form #user_submit_action",function(){_gaq.push(["_trackEvent","Sessions","Sign in Button, Popover"])});var filterBarElement=$("#controls.homepage"),filterBarExists=filterBarElement.length!=0;if(filterBarExists)var filterBarTop=filterBarElement.offset().top,windowElement=$(window);$(window).bind("scroll",function(){$("#show-me").show(),!$("#dim").is(":visible")&&!$("#new_zine").is(":visible")&&$("#up-top").show("fade",500),filterBarExists&&(windowElement.scrollTop()>filterBarTop-2&&!filterBarElement.hasClass("fixed")?(filterBarElement.addClass("fixed"),$("#footer").hide("fade",500),$("#hardgate-container").is(":visible")||$("#persistent_cta_top").show("fade",500)):windowElement.scrollTop()<=filterBarTop&&filterBarElement.hasClass("fixed")&&(filterBarElement.removeClass("fixed"),$("#persistent_cta_top").hide()))}),$(document).on("mouseenter",".up-top",function(){$(".background-upscroll").addClass("bump")}),$(document).on("mouseleave",".up-top",function(){$(".background-upscroll").removeClass("bump")}),$(document).on("click",".close-return-favor",function(){$(this).parent().parent().hide("fade")}),$(document).ready(function(){var a=$("#refresh-fb-token");a.length>0&&a.html().trim()==="true"&&popups.newPopup("/auth/facebook"),setTimeout(ZineView.refreshProcessedImages,5e3)}),$("#full-sized-image")&&addToOnload(function(){$("#full-sized-image").prepend('<img src="'+$("#full-sized-image").attr("data-img-src")+'" alt="'+$("#full-sized-image").attr("data-img-alt")+'" />')}),$(function(){initSelect2("#zine_tag_ids")}),$(document).on("ajax:error","#new_zine, #new_note",function(){var a=$(this).attr("id").substring(4);initSelect2("#"+a+"_tag_ids");var b=$("#"+a+"_tag_ids").val().split(",");if(b[0]!==""||b.length>1)var c=b.map(function(a){return{id:a,text:a.match(/^#/)?a:"#"+a}});$("#"+a+"_tag_ids").select2("data",c)}),$("#banner").ready(function(){var a=$("#banner").attr("class");mixpanel.track("App Banner: View",{Variant:a}),$(".icon-close div").click(function(){mixpanel.track("App Banner: Dismiss",{Variant:a}),$("#banner").animate({height:0,opacity:0},333,function(){$("#banner").remove()}),$.cookie("banner_dismissal_count")?($.cookie("banner_dismissal_count",parseInt($.cookie("banner_dismissal_count"))+1),$.cookie("banner_timestamp",Date.now()*.001)):($.cookie("banner_dismissal_count",1,{expires:30,path:"/"}),$.cookie("banner_timestamp",Date.now()*.001,{expires:30,path:"/"}))}),$("a.background-app_store").click(function(){mixpanel.track("App Banner: Click",{Variant:a}),$.ajax({type:"POST",url:"/finish_ab_test/ios_banner"})})});